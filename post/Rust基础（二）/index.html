<!DOCTYPE html>
<html lang="en">

  <head>
    <!--æ¯ä¸ªé¡µé¢éƒ½éœ€è¦ head linkç­‰  -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>
  RuståŸºç¡€ï¼ˆäºŒï¼‰ - Nuo&#39;s Blog
</title>
<link rel="shortcut icon" href="https://blog.qxxiao.eu.org/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/tailwind.css">
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/ldbutton.css">

<link rel="stylesheet" href="https://blog.qxxiao.eu.org/styles/main.css">
<script src="https://blog.qxxiao.eu.org/media/scripts/initTheme.js"></script>
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/light-dark.css">

<link rel="alternate" type="application/atom+xml" title="RuståŸºç¡€ï¼ˆäºŒï¼‰ - Nuo&#39;s Blog - Atom Feed"
  href="https://blog.qxxiao.eu.org/atom.xml">


      <meta name="description" content="Hello Rust.

[TOC]
Rust å¿«é€Ÿå…¥é—¨ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚
é—­åŒ…ï½œè¿­ä»£å™¨
é—­åŒ…
é—­åŒ…ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„åŒ¿åå‡½æ•°ã€‚ï¼ˆC++ç±»ä¼¼lambdaï¼Œå¯ä»¥ä»å…¶å®šä¹‰çš„ä½œç”¨åŸŸæ•è·å€¼ï¼‰
é—­åŒ…å¯ä»¥ä¿å­˜ä¸ºå˜é‡ï¼Œä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæˆ–è€…å‡½æ•°è¿”å›å€¼ã€‚
fn..." />
      <meta property="og:title" content="RuståŸºç¡€ï¼ˆäºŒï¼‰ - Nuo&#39;s Blog" />
      <meta property="og:description" content="Hello Rust.

[TOC]
Rust å¿«é€Ÿå…¥é—¨ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚
é—­åŒ…ï½œè¿­ä»£å™¨
é—­åŒ…
é—­åŒ…ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„åŒ¿åå‡½æ•°ã€‚ï¼ˆC++ç±»ä¼¼lambdaï¼Œå¯ä»¥ä»å…¶å®šä¹‰çš„ä½œç”¨åŸŸæ•è·å€¼ï¼‰
é—­åŒ…å¯ä»¥ä¿å­˜ä¸ºå˜é‡ï¼Œä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæˆ–è€…å‡½æ•°è¿”å›å€¼ã€‚
fn..." />
      <meta property="og:type" content="articles" />
      <meta property="og:url" content="https://blog.qxxiao.eu.org/post/RuståŸºç¡€ï¼ˆäºŒï¼‰/" />
      <meta property="og:image"
        content="https://pic.qxxiao.cn/20220530212851.png" />
      <meta property="og:image:height" content="630" />
      <meta property="og:image:width" content="1200" />
      <meta name="twitter:title" content="RuståŸºç¡€ï¼ˆäºŒï¼‰ - Nuo&#39;s Blog" />
      <meta name="twitter:description" content="Hello Rust.

[TOC]
Rust å¿«é€Ÿå…¥é—¨ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚
é—­åŒ…ï½œè¿­ä»£å™¨
é—­åŒ…
é—­åŒ…ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„åŒ¿åå‡½æ•°ã€‚ï¼ˆC++ç±»ä¼¼lambdaï¼Œå¯ä»¥ä»å…¶å®šä¹‰çš„ä½œç”¨åŸŸæ•è·å€¼ï¼‰
é—­åŒ…å¯ä»¥ä¿å­˜ä¸ºå˜é‡ï¼Œä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæˆ–è€…å‡½æ•°è¿”å›å€¼ã€‚
fn..." />
      <meta name="twitter:card" content="summary_large_image" />
      <link rel="canonical" href="https://blog.qxxiao.eu.org/post/RuståŸºç¡€ï¼ˆäºŒï¼‰/" />

      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css" />

      
        <link rel="stylesheet"
          href="https://blog.qxxiao.eu.org/media/css/prism-vs-dark.css" />
        <link href="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.css"
          rel="stylesheet" />
        <link href="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/toolbar/prism-toolbar.min.css"
          rel="stylesheet" />
        
          
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" />
            
  </head>

  <body>
    <div class="antialiased flex flex-col min-h-screen" id="app">
      <!-- æ ‡é¢˜èœå• -->
<div class="nav py-3 md:py-8 fixed w-full z-10 bg-gray-50 dark:bg-gray-700 transition-all duration-300"
  :class="{ 'scroll': scrolled }">
  <div class="flex justify-end px-4">
    <div class="w-8 h-8 flex justify-center items-center rounded-full md:hidden" @click="showMenu = !showMenu">
      <i class="ri-close-line" v-show="showMenu"></i>
      <i class="ri-menu-3-line" v-show="!showMenu"></i>
    </div>
  </div>
  <nav cloak class="max-w-4xl w-full mx-auto text-right flex flex-col md:flex-row justify-between items-center md:flex"
    :class="`${ showMenu ? 'flex' : 'hidden' }`">
    
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
          <a href="/" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            é¦–é¡µ
          </a>
          
            
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
          <a href="/archives" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            å½’æ¡£
          </a>
          
            
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
          <a href="/tags" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            æ ‡ç­¾
          </a>
          
            
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
          <a href="https://gh.qxxiao.cn/nav" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            å¯¼èˆª
          </a>
          
            
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
        <div
          class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold dark:hover:bg-gray-600 hover:bg-gray-200 nav-time1">
          æ—¶å…‰
            <div class="transition font-semibold nav-time2">
              
                <a href="https://blog.qxxiao.eu.org/diary/" class="">
                  è¯´è¯´
                </a>
                
                <a href="https://blog.qxxiao.eu.org/gallery/" class="">
                  ç›¸å†Œ
                </a>
                
                <a href="https://blog.qxxiao.eu.org/post/book/" class="">
                  ä¹¦å•
                </a>
                
            </div>
        </div>
        
            
      <!-- å¦‚æœ menu æ˜¯ "æ—¶å…‰"ï¼Œ æ¸²æŸ“ä¸ºä¸€ä¸ªhoveræ˜¾ç¤ºä¸‹æ‹‰æ¡†ç»„ä»¶-->
      
          <a href="/post/about" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            å…³äº
          </a>
          
            
              <!-- <a href="https://blog.qxxiao.eu.org/atom.xml" target="_blank" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
      RSS
    </a> -->
              <!-- é»‘è‰²æ¨¡å¼ï¼Œå’Œäº®è‰²æ¨¡å¼å¼€å…³-->
<div class="py-2 md:py-1 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
  <label for="night-light-checkbox" class="night-light-label">
    <input type="checkbox" id="night-light-checkbox" @change="toggleDarkMode" />
    <span v-cloak class="night-light-ball" id="night-light-ball"></span>
    <svg viewBox="0 0 512 512" class="sun-svg">
      <path id="sun-svg"
        d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z">
      </path>
    </svg>
    <svg viewBox="0 0 512 512" class="moon-svg">
      <path id="moon-svg"
        d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z">
      </path>
    </svg>
  </label>
</div>
                <form id="gridea-search-form" class="inline-flex mx-4 px-4" action="https://blog.qxxiao.eu.org/search/">
                  <input type="search" autocomplete='off' spellcheck='false' name="q" />
                </form>
  </nav>

</div>
        <a href="https://blog.qxxiao.eu.org"
          class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10">
          Nuo&#39;s Blog
        </a>
        <div class="max-w-4xl w-full mx-auto">
          <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 px-4 md:px-8 pb-8 mb-8">
            <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
              RuståŸºç¡€ï¼ˆäºŒï¼‰
            </h1>
            
              <img src="https://pic.qxxiao.cn/20220530212851.png" alt="RuståŸºç¡€ï¼ˆäºŒï¼‰" class="block w-full mb-8" />
              
                <div class="mb-8 flex flex-wrap">
                  <div class="text-gray-400 text-sm mr-4">
                    <i class="ri-calendar-2-line" style="vertical-align: middle;"></i>
                    2022-05-30 Â·
                      <i class="ri-file-word-line" style="vertical-align: middle;"></i>
                      2186å­— Â·
                        <i class="ri-timer-line" style="vertical-align: middle;"></i>
                        10 min read
                  </div>
                  ğŸ·ï¸&nbsp;
                      
                        <a href="https://blog.qxxiao.eu.org/tag/rust/"
                          class="text-indigo-500 text-sm border-b-2 border-solid border-indigo-500 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
                          <i class="ri-hashtag" style="vertical-align: middle;"></i>
                          Rust
                        </a>
                        
                </div>
                <div class="markdown mb-8" v-pre><p>Hello Rust.</p>
<!-- more -->
<p>[TOC]</p>
<p>Rust å¿«é€Ÿå…¥é—¨ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚</p>
<h2 id="é—­åŒ…è¿­ä»£å™¨">é—­åŒ…ï½œè¿­ä»£å™¨</h2>
<h3 id="é—­åŒ…">é—­åŒ…</h3>
<p>é—­åŒ…ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„<font color='#d44c47'>åŒ¿åå‡½æ•°</font>ã€‚ï¼ˆC++ç±»ä¼¼lambdaï¼Œå¯ä»¥ä»å…¶å®šä¹‰çš„ä½œç”¨åŸŸæ•è·å€¼ï¼‰</p>
<p>é—­åŒ…å¯ä»¥<strong>ä¿å­˜ä¸ºå˜é‡</strong>ï¼Œä½œä¸ºå‡½æ•°å‚æ•°ï¼Œæˆ–è€…å‡½æ•°è¿”å›å€¼ã€‚</p>
<pre><code class="language-rust">fn main(){
	let closure = |x| x;    // let closure = |x: String| -&gt; String {x};
	let s = closure(String::from(&quot;hello&quot;));
	// let n = closure(5); // error ä¸Šä¸€å¥å·²ç»æ¨æ–­å‡ºclosureä¸­çš„å…·ä½“ç±»å‹
}
</code></pre>
<ul>
<li>
<p>é—­åŒ…<strong>ä¸è¦æ±‚æ ‡æ³¨å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹</strong>ï¼›</p>
</li>
<li>
<p>é—­åŒ…çš„å®šä¹‰ï¼Œæœ€ç»ˆåªä¼šè¢«æ¨æ–­å‡ºå”¯ä¸€çš„å…·ä½“ç±»å‹ï¼ˆæˆ–è€…æ˜¾ç¤ºæ ‡æ³¨ç±»å‹ï¼‰</p>
</li>
</ul>
<p><font color='#d44c47'><strong>æ¯ä¸ªé—­åŒ…å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€åŒ¿åç±»å‹</strong></font>ï¼Œå¹¶ä¸”é—­åŒ…éƒ½å®ç°äº†ä»¥ä¸‹<u>Fn Trait</u>ä¹‹ä¸€ï¼š</p>
<ul>
<li>
<p>Fn ä¸å¯å˜å€Ÿç”¨ç¯å¢ƒå€¼</p>
</li>
<li>
<p>FnMut å¯å˜å€Ÿç”¨ç¯å¢ƒå€¼</p>
</li>
<li>
<p>FnOnce å–å¾—æ‰€æœ‰æƒ</p>
</li>
</ul>
<details class="markdown">
<summary><b>åˆ©ç”¨é—­åŒ…å®ç° Cacher ç¼“å­˜å™¨ï¼Œå®ç°å»¶è¿Ÿè®¡ç®—/æƒ°æ€§æ±‚å€¼</b></summary>
<pre><code class="language-rust">use std::collections;
struct Cacher&lt;T&gt;
where
    T: Fn(u32) -&gt; u32,
{
    calculation: T,
    value: collections::HashMap&lt;u32, u32&gt;,
}

impl&lt;T&gt; Cacher&lt;T&gt;
where
    T: Fn(u32) -&gt; u32,
{
    fn new(calculation: T) -&gt; Cacher&lt;T&gt; {
        Cacher {
            calculation,
            value: collections::HashMap::new(),
        }
    }
    fn value(&amp;mut self, arg: u32) -&gt; u32 {
        match self.value.get(&amp;arg) {
            Some(v) =&gt; *v,
            None =&gt; {
                let v = (self.calculation)(arg);
                self.value.insert(arg, v);
                v
            }
        }
    }
}
</code></pre>
</details>
<p>ã€é—­åŒ…è¿˜ä¸æ”¯æŒæ³›å‹ã€‘</p>
<h3 id="æ•è·å˜é‡">æ•è·å˜é‡</h3>
<p>æ™®é€šå‡½æ•°ä¸èƒ½æ•è·ä¸Šä¸‹æ–‡å˜é‡ï¼Œè€Œé—­åŒ…å¯ä»¥ã€‚ç»“åˆä¸Šè¿°3ç§<u>Fn Trait</u>ï¼ŒRustå¯ä»¥æ ¹æ®ç¯å¢ƒå€¼çš„ä½¿ç”¨æƒ…å†µæ¨æ–­å‡ºå…·ä½“çš„é—­åŒ…ç±»å‹ï¼š</p>
<ul>
<li>
<p>é»˜è®¤åªæ•è·å€¼çš„<strong>ä¸å¯å˜å¼•ç”¨</strong>ï¼Œå®ç° Fn ï¼ˆä¸å¯å˜å€Ÿç”¨ï¼Œåªèƒ½è¯»ï¼‰</p>
</li>
<li>
<p>è·å–å€¼çš„<strong>å¯å˜å¼•ç”¨</strong>ï¼Œå®ç° FnMutï¼ˆå¯å˜å€Ÿç”¨ï¼Œå¯ä»¥ä¿®æ”¹å€¼ï¼‰</p>
</li>
<li>
<p>è·å–å€¼çš„<strong>æ‰€æœ‰æƒ</strong>ï¼Œå®ç° FnOnceï¼Œåªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼ˆå› ä¸ºè·å–äº†æ‰€æœ‰æƒï¼‰</p>
</li>
</ul>
<div class="markdown notion" style="padding: 10px; color: #37352f; background-color: #e7f3f8; border-radius: 6px; border:1px solid #dfdfde">
<div style="width: 28px;height: 28px;margin-left: 0px;margin-right: 10px;position: absolute;"><span style="font-size: 18px;">ğŸ’¡</span></div>
<p style="line-height: 28px; margin: 0px 5px 0px 38px !important">æ³¨æ„ï¼š3ç§Traitå­˜åœ¨å±‚çº§å…³ç³»ï¼›å®ç°äº†Fnçš„é—­åŒ…éƒ½å®ç°äº†FnMutï¼Œè€Œå®ç°äº†FnMutçš„é—­åŒ…éƒ½å®ç°äº†FnOnceï¼Œå› æ­¤æ‰€æœ‰çš„é—­åŒ…éƒ½å®ç°äº†FnOnce.</p></div>
<p>ä½¿ç”¨<code>move</code>å…³é”®å­—ï¼š</p>
<p>å¯ä»¥åœ¨å®šä¹‰é—­åŒ…çš„å‚æ•°åˆ—è¡¨å‰ä½¿ç”¨ moveï¼Œå¼ºåˆ¶é—­åŒ…è·å–å€¼çš„æ‰€æœ‰æƒã€‚</p>
<p>å°†é—­åŒ…ä¼ é€’ç»™æ–°çº¿ç¨‹ä»¥ç§»åŠ¨æ•°æ®æ—¶ï¼Œéå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="language-rust">let x = vec![1, 2, 3];
let equal_to_x = move |z: i32| z == x[0];
// println!(&quot;{:#?}&quot;, x); // error [E0382]: use of moved value: `x`
</code></pre>
<p>å¯¹äºåŸºæœ¬ç±»å‹ä»¥åŠå¼•ç”¨ç±»å‹ï¼Œæ²¡æœ‰æ‰€æœ‰æƒçš„å˜é‡ä¸å½±å“ã€‚</p>
<h3 id="è¿­ä»£å™¨">è¿­ä»£å™¨</h3>
<p>Rust è¿­ä»£å™¨æ˜¯æƒ°æ€§è¿­ä»£å™¨ï¼Œç”¨äºéå†ï¼š</p>
<pre><code class="language-rust">let v = vec![1, 2, 3];
// for val in v 
// è°ƒç”¨ into_iter() moved
for val:&amp;i32 in v.iter() { // borrow
    println!(&quot;{}&quot;, val);
}
</code></pre>
<p><strong>å®ç°ï¼š</strong></p>
<p>è¿­ä»£å™¨éƒ½å®ç°äº†<code>trait Iterator</code>ï¼Œéœ€è¦å®ç°<code>next</code>æ–¹æ³•ï¼›è¯¥ trait ä¹Ÿæä¾›äº†ä¸€äº›é»˜è®¤å®ç°æ–¹æ³•ã€‚</p>
<pre><code class="language-rust">pub trait Iterator{
    type Item;
    fn next(&amp;mut self)-&gt;Option&lt;Self::Item&gt;;
    // default methods elided
}
</code></pre>
<p>äº§ç”Ÿè¿­ä»£å™¨çš„è¿­ä»£æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><strong><code>iter()</code></strong> åˆ›å»ºè¿­ä»£å™¨ï¼Œç”¨äºè¿­ä»£å…ƒç´ çš„<strong>ä¸å¯å˜å¼•ç”¨</strong>ï¼›</p>
</li>
<li>
<p><strong><code>iter_mut()</code></strong> åˆ›å»ºè¿­ä»£å™¨ï¼Œç”¨äºè¿­ä»£<strong>å…ƒç´ çš„å¯å˜å¼•ç”¨</strong>ï¼›</p>
</li>
<li>
<p>**<code>into_iter()</code>**<strong>è·å–æ‰€æœ‰æƒ</strong>ï¼Œåˆ›å»ºè¿­ä»£å™¨ç”¨äºè¿­ä»£å…ƒç´ æœ¬èº«ï¼›</p>
</li>
</ul>
<h3 id="è¿­ä»£å™¨é€‚é…å™¨">è¿­ä»£å™¨é€‚é…å™¨</h3>
<p>Iterator trait æä¾›äº†<strong>è¿­ä»£å™¨é€‚é…å™¨</strong>æ–¹æ³•ï¼Œç”¨æ¥å°†è¿­ä»£å™¨è½¬æ¢ä¸ºä¸åŒç§ç±»çš„è¿­ä»£å™¨ã€‚</p>
<p>ä¾‹å¦‚ map, filter</p>
<pre><code class="language-rust">let v = vec![1, 2, 3];
let iter = v.iter().map(|x: &amp;i32| x * 2);
let iter2 = v.iter().map(|x| x * 2).filter(|x| x &gt; &amp;3);

// ä½¿ç”¨æ¶ˆè€—å‹é€‚é…å™¨æ–¹æ³•ï¼ˆè·å–è¿­ä»£å™¨æ‰€æœ‰æƒï¼Œå¹¶ä¼šä½¿ç”¨nextæ–¹æ³•ï¼‰
// collect æ”¶é›†å…ƒç´ åˆ°é›†åˆç±»å‹
let v2:Vec[i32] = iter.collect();
</code></pre>
<p>ä½¿ç”¨ zip æ“ä½œä¸¤ä¸ªè¿­ä»£å™¨ï¼Œè½¬æ¢ä¸ºæ–°çš„è¿­ä»£å™¨ï¼ˆå…ƒç»„ç±»å‹ï¼‰</p>
<p>é‡åˆ°å…¶ä¸­ä¸€ä¸ªå€¼æ˜¯ Noneï¼Œè¿­ä»£ä¼šåœæ­¢ã€‚</p>
<details class="markdown">
<summary><b>ç¤ºä¾‹</b></summary>
<pre><code class="language-rust">struct Counter {
    count: u32,
}

impl Counter {
    fn new() -&gt; Counter {
        Counter { count: 0 }
    }
}

impl Iterator for Counter {
    type Item = u32;

    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt; {
        self.count += 1;

        if self.count &lt; 6 {
            Some(self.count)
        } else {
            None
        }
    }
}
</code></pre>
</details>
<pre><code class="language-rust">let sum: u32 = Counter::new().take(5)
    .zip(Counter::new().skip(1).take(4))
    .map(|(a,b)| a*b)
    .filter(|x| x%3==0)
    .sum();
assert_eq!(18, sum);
</code></pre>
<h2 id="æ™ºèƒ½æŒ‡é’ˆ">æ™ºèƒ½æŒ‡é’ˆ</h2>
<p>Rust ä¸­çš„å¼•ç”¨(ä½¿ç”¨<code>&amp;</code>)å°±æ˜¯æŒ‡é’ˆç±»å‹ï¼Œ<u>åª</u><font color='#d44c47'><u>å€Ÿç”¨</u></font><u>æŒ‡å‘çš„å€¼</u>ï¼Œæ˜¯æœ€å¸¸è§çš„æŒ‡é’ˆç±»å‹ã€‚ï¼ˆåˆ‡ç‰‡ä¹Ÿæ˜¯å¼•ç”¨ç±»å‹ï¼Œä¼šæœ‰é•¿åº¦ä¿¡æ¯ï¼‰</p>
<div class="markdown notion" style="padding: 10px; color: #37352f; background-color: #fdebec; border-radius: 6px; border:1px solid #dfdfde">
<div style="width: 28px;height: 28px;margin-left: 0px;margin-right: 10px;position: absolute;"><span style="font-size: 18px;">ğŸ’¡</span></div>
<p style="line-height: 28px; margin: 0px 5px 0px 38px !important">æ™ºèƒ½æŒ‡é’ˆçš„è¡Œä¸ºç±»ä¼¼æŒ‡é’ˆï¼Œå…·æœ‰é¢å¤–çš„å…ƒæ•°æ®å’ŒåŠŸèƒ½ï¼›å¹¶ä¸”ä¸€èˆ¬ä¼šæ‹¥æœ‰æŒ‡å‘ æ•°æ®çš„æ‰€æœ‰æƒ</p></div>
<p>ä¾‹å¦‚<code>String | Vec&lt;T&gt;</code>ï¼Œæ‹¥æœ‰ä¸€ç‰‡å†…å­˜åŒºåŸŸä»¥åŠå…ƒæ•°æ®å’Œç›¸å…³åŠŸèƒ½ã€‚</p>
<p>æ™ºèƒ½æŒ‡é’ˆï¼Œè¯­ä¹‰ä¸Šåº”è¯¥å®ç°<strong>Deref trait</strong> <strong>å’Œ Drop trait</strong>ï¼š</p>
<pre><code class="language-rust">Deref Trait: å®ç° deref() æ–¹æ³•
//å…è®¸æ™ºèƒ½æŒ‡é’ˆ è‡ªå®šä¹‰è§£å¼•ç”¨è¿ç®—ç¬¦ * çš„è¡Œä¸º
Drop  Trait: å®ç° drop() æ–¹æ³•
// è‡ªå®šä¹‰å½“æŒ‡é’ˆæŒ‡é’ˆå®ä¾‹ç¦»å¼€ä½œç”¨åŸŸæ—¶è¿è¡Œçš„ä»£ç 
</code></pre>
<p><span style='background-color: #fefe00' >å³å®ç°äº† Deref  Trait (è¿”å›å¼•ç”¨ç±»å‹)ï¼Œä½¿å¾—å®ç°è¯¥ trait ç±»å‹çš„å˜é‡å¯ä»¥ä½¿ç”¨</span><span style='background-color: #fefe00' ><code>*var</code></span><span style='background-color: #fefe00' >æ“ä½œ</span></p>
<pre><code class="language-rust">*var
// &lt;==&gt;
*(var.deref())
</code></pre>
<ul>
<li>ä¸å…è®¸æ˜¾ç¤ºè°ƒç”¨ drop æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨<code>std::mem::drop</code>å‡½æ•°ï¼›</li>
</ul>
<h3 id="è§£å¼•ç”¨è½¬æ¢">è§£å¼•ç”¨è½¬æ¢</h3>
<p>Deref tait å°†<code>&amp;T â‡’ &amp;U</code>å¹¶ä¸”<u>ç±»å‹ T éšå¼å®ç°äº†ç±»å‹ U çš„æ‰€æœ‰(ä¸å¯å˜)æ–¹æ³•</u>ã€‚(éšå¼)è§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ deref coercionï¼Œå®ç°äº† Deref trait çš„ç±»å‹å¯ä»¥å°†å…¶å¼•ç”¨é“¾å¼è°ƒç”¨ deref è½¬æ¢ä¸ºå…¶ä»–ç±»å‹çš„å¼•ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒString å®ç°äº† Derefï¼Œå¯ä»¥è‡ªåŠ¨å°†<code>&amp;String</code>è½¬æ¢ä¸º<code>&amp;str</code></p>
<details class="markdown">
<summary><b>ç¤ºä¾‹ä»£ç  MyBox</b></summary>
<pre><code class="language-rust">use std::ops::Deref;

struct MyBox&lt;T&gt;(T);
impl&lt;T&gt; MyBox&lt;T&gt; {
    fn new(x: T) -&gt; MyBox&lt;T&gt; {
        MyBox(x)
    }
}

impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
    type Target = T; // å…³è”ç±»å‹ï¼Œå¿…é¡»å®šä¹‰

    fn deref(&amp;self) -&gt; &amp;T {
        &amp;self.0
    }
}

fn main(){
    let m = MyBox::new(String::from(&quot;Rust&quot;));
    hello(&quot;hello Rust&quot;);
    hello(&amp;m);
    hello(&amp;String::from(&quot;Rust&quot;));
    hello(&amp;(*m)[..])
}
</code></pre>
</details>
<ul>
<li>å…è®¸ä½¿ç”¨<code>DerefMut trait</code>æ¥é‡è½½å¯å˜å¼•ç”¨çš„<code>*è¿ç®—ç¬¦</code>ï¼›</li>
</ul>
<div class="markdown notion" style="padding: 10px; color: #37352f; background-color: #e7f3f8; border-radius: 6px; border:1px solid #dfdfde">
<div style="width: 28px;height: 28px;margin-left: 0px;margin-right: 10px;position: absolute;"><span style="font-size: 18px;">ğŸ’¡</span></div>
<p style="line-height: 28px; margin: 0px 5px 0px 38px !important"><em>Deref trait</em>å¯ä»¥å°†å¯å˜å¼•ç”¨å¯ä»¥è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ä¸å¯å˜å¼•ç”¨ï¼›<em>DerefMut trait</em>å°†å¯å˜å¼•ç”¨å¯ä»¥è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹çš„å¯å˜å¼•ç”¨ã€‚</p></div>
<h3 id="å¸¸è§ç±»å‹">å¸¸è§ç±»å‹</h3>
<p><strong>Box<T></strong></p>
<p>æœ€ç®€å•çš„æ™ºèƒ½æŒ‡é’ˆï¼Œåœ¨å †å†…å­˜ä¸Šåˆ†é…å€¼ï¼Œæ ˆç©ºé—´æœ‰æŒ‡å‘æ•°æ®çš„æŒ‡é’ˆã€‚å…¶æ‹¥æœ‰æ•°æ®æ‰€æœ‰æƒã€‚</p>
<p><strong>Rc<T></strong></p>
<p><strong>å¤šé‡æ‰€æœ‰æƒ</strong>çš„<u><strong>å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆRc</strong></u>(Reference counting)ï¼Œä½¿å¾—ä¸€ä»½æ•°æ®è¢«å¤šä¸ªæ‰€æœ‰è€…<font color='#d44c47'><strong>æŒæœ‰</strong></font>ï¼Œå¼•ç”¨è®¡æ•°ä¸º0æ‰æ¸…ç†æ•°æ®ã€‚<font color='#d44c47'>é€šè¿‡ä¸å¯å˜å¼•ç”¨åªæä¾›å¯¹æ•°æ®çš„ä¸å¯å˜è®¿é—®ã€‚</font></p>
<p>åœºæ™¯ï¼š</p>
<ul>
<li>
<p>å †ä¸Šæ•°æ®è¢«å¤šä¸ªéƒ¨åˆ†<strong>è¯»å–ï¼ˆ<strong>ä¸å¯å˜å€Ÿç”¨</strong>ï¼‰</strong>ï¼Œä½†æ˜¯ç¼–è¯‘å™¨æ— æ³•ç¡®å®šå“ªä¸ªéƒ¨åˆ†æœ€åä½¿ç”¨å®Œæ•°æ®ï¼ˆå¦åˆ™å°†æœ€åä½¿ç”¨çš„éƒ¨åˆ†è®¾ç½®ä¸ºå€¼çš„æ‰€æœ‰è€…å³å¯ï¼‰ï¼›</p>
</li>
<li>
<p><u>åªèƒ½ç”¨äºå•çº¿ç¨‹</u>ï¼›</p>
</li>
</ul>
<p><code>Rc::new()</code>ç”¨æ¥ç”Ÿæˆå¯¹åº”ç±»å‹çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆï¼Œä½¿ç”¨<code>Rc::clone(&amp;rc)</code>æ¥è·å–ç›¸åŒå€¼çš„å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆï¼ˆå¼•ç”¨è®¡æ•°+1ï¼‰</p>
<details class="markdown">
<summary><b>enum å’Œ Rc ç¤ºä¾‹</b></summary>
<pre><code class="language-rust">use crate::List::{Cons, Nil};
use std::rc::Rc;

// List ä¸­å…ƒç´ å­˜æ´»æ—¶é—´è‡³å°‘æ¯” List çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒ
#[derive(Debug)]
enum List {
    Cons(i32, Rc&lt;List&gt;),
    Nil,
}

fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    let b = Cons(3, Rc::clone(&amp;a)); // å¤åˆ¶ï¼Œå¢åŠ å¼•ç”¨è®¡æ•°
    let c = Cons(4, Rc::clone(&amp;a));
    // print strong_count
    println!(&quot;strong_count: {}&quot;, Rc::strong_count(&amp;a)); // è·å–å¼ºå¼•ç”¨è®¡æ•°
    println!(&quot;a = {:#?}&quot;, b);
    println!(&quot;b = {:#?}&quot;, c);
}
</code></pre>
</details>
<p><strong>RefCell<T></strong></p>
<p>ç”¨äºå®ç°å†…éƒ¨æ•°æ®çš„å¯å˜æ€§ï¼Œå…è®¸ä½ åœ¨åªæŒæœ‰ä¸å¯å˜å¼•ç”¨çš„å‰æä¸‹å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</p>
<ul>
<li>
<p>å¯¼å…¥<code>std::cell::RefCell</code></p>
</li>
<li>
<p><strong>ä»£è¡¨æŒæœ‰æ•°æ®çš„å”¯ä¸€æ‰€æœ‰æƒ</strong>ï¼Œå…¶å¯å˜æ€§å’Œå€Ÿç”¨è§„åˆ™æ˜¯<strong>è¿è¡Œæ—¶æœŸ</strong>æ£€æŸ¥ã€‚</p>
</li>
<li>
<p><u>ç”¨äºå•çº¿ç¨‹ç¯å¢ƒ</u></p>
</li>
</ul>
<p>æ™ºèƒ½æŒ‡é’ˆæ¯”è¾ƒï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://pic.qxxiao.cn/rust_Rc.png" alt="" loading="lazy"></figure>
<p>ä½¿ç”¨åœºæ™¯ï¼šéœ€è¦åœ¨ä¸å¯å˜ç¯å¢ƒä¸­ä¿®æ”¹è‡ªèº«çš„æ•°æ®ï¼Œå°†æ•°æ®ä½¿ç”¨<code>RefCell&lt;T&gt;</code>åŒ…è£…ï¼Œå¯ä»¥åœ¨è¿è¡ŒæœŸè·å–å¯å˜å¼•ç”¨æ¥ä¿®æ”¹æ•°æ®ã€‚<mark>ç”¨äºå®ç°å†…éƒ¨å¯å˜æ€§</mark>ã€‚</p>
<ul>
<li>
<p>è·å–å†…éƒ¨å€¼çš„ä¸å¯å˜å¼•ç”¨<code>borrow()æ–¹æ³•</code>ï¼Œè¿”å›<code>Ref&lt;T&gt;</code>å…¶å®ç°äº† Deref</p>
</li>
<li>
<p>è·å–å†…éƒ¨å€¼çš„å¯å˜å¼•ç”¨<code>borrow_mut()æ–¹æ³•</code>ï¼Œè¿”å›<code>RefMut&lt;T&gt;</code>å…¶å®ç°äº† Deref</p>
</li>
</ul>
<pre><code class="language-rust">use std::cell::RefCell
struct MockMes{
	sent_messages: RefCell&lt;Vec&lt;String&gt;&gt;,
}

impl MockMes{
	fn send(&amp;self, message: &amp;str){
		self.sent_messages.borrow_mut().push(String::from(message));
	}
}
</code></pre>
<p><code>Ref&lt;T&gt; ï½œRefMut&lt;T&gt;</code>ï¼ˆRefCell<T>æ–¹æ³•ï¼‰è®¿é—®æ•°æ®ä¸å¯å˜å¼•ç”¨å’Œå¯å˜å¼•ç”¨ã€‚</p>
<p>RefCell ä¼šè®°å½•è¿™ä¸¤ç§æŒ‡é’ˆä¸ªæ•°ï¼Œæ¥ç»´æŠ¤è¿è¡Œæ—¶çš„å€Ÿç”¨æ£€æŸ¥è§„åˆ™ï¼Œç»™å®šæ—¶é—´åªå…è®¸æ‹¥æœ‰å¤šä¸ªä¸å¯å˜å€Ÿç”¨æˆ–è€…ä¸€ä¸ªå¯å˜å€Ÿç”¨ã€‚</p>
<p>é€šå¸¸ä¼šå°† Rc<T> å’Œ RefCell<T> ç»“åˆä½¿ç”¨ï¼Œå®ç°ä¸€ä¸ªæ‹¥æœ‰å¤šé‡æ‰€æœ‰æƒçš„å¯å˜æ•°æ®ã€‚</p>
<h3 id="å¾ªç¯å¼•ç”¨">å¾ªç¯å¼•ç”¨</h3>
<p>ä½¿ç”¨ Weak<T> æ¥é¿å…å¾ªç¯å¼•ç”¨ï¼Œå¹¶ä¸åˆ†äº«å®ä¾‹çš„æ‰€æœ‰æƒï¼Œå½“ Strong_Reference æ•°é‡ä¸º0æ—¶ï¼Œå€¼ä¼šè¢«æ¸…ç†ã€‚ç›¸å…³å‡½æ•°ï¼š</p>
<ul>
<li>
<p>è°ƒç”¨<code>Rc::downgrade(&amp;rc)</code>ï¼Œè¿”å›<code>Weak&lt;T&gt;</code>ï¼Œå¹¶ä¸”å¼±å¼•ç”¨è®¡æ•°<code>weak_count</code>åŠ 1</p>
</li>
<li>
<p>è°ƒç”¨<code>Weak&lt;T&gt;</code>çš„ upgrade() æ–¹æ³•ï¼Œè¿”å›<code>Option&lt;Rc&lt;T&gt;&gt;</code>ï¼ˆéœ€è¦ä¿è¯æŒ‡å‘çš„å€¼ä»ç„¶å­˜åœ¨ï¼‰</p>
</li>
</ul>
</div>

                <!-- æ–°åŠ çš„æ¨¡å—çš„ï¼Œåº”è¯¥ä½¿ç”¨æ¨¡ç‰ˆ-->
                <!-- ç‰ˆæƒå£°æ˜ -->
                
                  <div class="jumbotron">
                    <div class="container">
                      <p>
                        <i class="ri-article-line"></i>
                        <b>æœ¬æ–‡é“¾æ¥:</b>
                        <a href="https://blog.qxxiao.eu.org/post/RuståŸºç¡€ï¼ˆäºŒï¼‰/" target="_blank">
                          RuståŸºç¡€ï¼ˆäºŒï¼‰
                        </a>
                      </p>
                      <p>
                        <i class="ri-creative-commons-line"></i>
                        <b>ç‰ˆæƒå£°æ˜:</b>
                        æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC
                          BY-NC-SA
                          4.0</a>
                        è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
                      </p>
                      <p>
                        <i class="ri-time-line"></i>
                        <b>å‘å¸ƒæ—¥æœŸ:</b>
                        2022-05-30
                      </p>
                      <p>
                        <i class="ri-time-line"></i>
                        <b>æœ€åæ›´æ–°:</b>
                        <!-- ä½¿ç”¨ themeConfig.dateFormat æ ¼å¼å¯¹æ—¥æœŸæ ¼å¼åŒ–ï¼Œä¾‹å¦‚YY-MM-DD -->
                        
                              2022-05-30
                                
                      </p>
                    </div>
                  </div>
                  
                    <!-- æ–°åŠ çš„æ¨¡å—çš„ï¼Œåº”è¯¥ä½¿ç”¨æ¨¡ç‰ˆ-->
                    <!--é˜…è¯»æ¬¡æ•°-->
                    <div class="text-center text-gray-400">
                      <i class="ri-eye-line"></i>
                      æœ¬æ–‡å·²è¢«é˜…è¯»
                      <span id="twikoo_visitors">0</span>
                      æ¬¡ï¼Œè¯¥æ•°æ®ä»…ä¾›å‚è€ƒ
                    </div>

                    <!-- Share to Twitter, Weibo, Telegram -->
                    <div class="flex items-center">
                      <div class="mr-4 flex items-center">
                        <i class="ri-share-forward-line text-gray-500"></i>
                      </div>
                      <div
                        class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToTwitter">
                        <i class="ri-twitter-line"></i>
                      </div>
                      <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToWeibo">
                        <i class="ri-weibo-line"></i>
                      </div>
                      <div
                        class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToTelegram">
                        <i class="ri-telegram-line"></i>
                      </div>
                    </div>
          </div>

          <!-- æ–°åŠ çš„æ¨¡å—çš„ï¼Œåº”è¯¥ä½¿ç”¨æ¨¡ç‰ˆ-->
          <!-- è¯„è®ºè¯´æ˜-->
          <div class="jumbotron-comment">
            <div class="container">
              <p>
                <i class="ri-message-3-line"></i>
                æ¬¢è¿ä»»ä½•ä¸æ–‡ç« å†…å®¹ç›¸å…³å¹¶ä¿æŒå°Šé‡çš„è¯„è®ºğŸ˜Š !
              </p>
            </div>
          </div>

          
                        
                            
                              <div id="tcomment"></div>
                               <footer class="py-12 text-center px-4 md:px-0" v-pre>
  å…± 43 ç¯‡æ–‡ç«  | Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <i class="ri-rss-line"></i><a href="https://blog.qxxiao.eu.org/atom.xml" target="_blank" target="_blank">RSS</a></br>
Â©2020-2024 <a href="https://blog.qxxiao.eu.org/index.html" target="_blank">Nuo</a>. All rights reserved.
</footer>

<!--æ²¡æœ‰æ·»åŠ /ç”¨åˆ°app ä¸­çš„ä¸»é¢˜footeré…ç½®æ¶ˆæ¯ï¼Œå¦‚æœä½¿ç”¨ï¼Œå°†ä¸Šé¢çš„ href æ›¿æ¢ä¸ºåŸåœ°å€-->
<!---->

        </div>

        <!-- TOC Container -->
        <div
          class="fixed right-0 bottom-0 mb-40 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all"
          @click="showToc = true">
          <i class="ri-file-list-line"></i>
        </div>

        <div v-cloak
          class="fixed right-0 top-0 bottom-0 overflow-y-auto w-16-24 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast"
          :class="{ '-mr-64': !showToc }">
          <div class="flex mb-4 justify-end">
            <div
              class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast"
              @click="showToc = false">
              <i class="ri-close-line text-lg"></i>
            </div>
          </div>
          <div class="post-toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E9%97%AD%E5%8C%85%E8%BF%AD%E4%BB%A3%E5%99%A8">é—­åŒ…ï½œè¿­ä»£å™¨</a>
<ul>
<li><a href="#%E9%97%AD%E5%8C%85">é—­åŒ…</a></li>
<li><a href="#%E6%8D%95%E8%8E%B7%E5%8F%98%E9%87%8F">æ•è·å˜é‡</a></li>
<li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8">è¿­ä»£å™¨</a></li>
<li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E9%80%82%E9%85%8D%E5%99%A8">è¿­ä»£å™¨é€‚é…å™¨</a></li>
</ul>
</li>
<li><a href="#%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88">æ™ºèƒ½æŒ‡é’ˆ</a>
<ul>
<li><a href="#%E8%A7%A3%E5%BC%95%E7%94%A8%E8%BD%AC%E6%8D%A2">è§£å¼•ç”¨è½¬æ¢</a></li>
<li><a href="#%E5%B8%B8%E8%A7%81%E7%B1%BB%E5%9E%8B">å¸¸è§ç±»å‹</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8">å¾ªç¯å¼•ç”¨</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
        </div>

        <!-- Back to top -->
        <div v-cloak
          class="fixed right-0 bottom-0 mb-20 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg dark:bg-gray-500 dark:text-gray-200"
          @click="backToUp" v-show="scrolled">
          <i class="ri-arrow-up-line"></i>
        </div>
        <!-- Back to bottom -->
        <div v-cloak
          class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg dark:bg-gray-500 dark:text-gray-200"
          @click="backToBottom" v-show="!atBottom">
          <i class="ri-arrow-down-line"></i>
        </div>
    </div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

      <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
      <script src="https://blog.qxxiao.eu.org/media/scripts/main.js"></script>

      <!-- Code Highlight -->
      
        <script src="https://blog.qxxiao.eu.org/media/prism.js"></script>
        <script>
          Prism.highlightAll();
        </script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/toolbar/prism-toolbar.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/show-language/prism-show-language.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
        

          <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
          <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
          <script>
            //æ‹¿åˆ°é¢„è§ˆæ¡†æ¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„htmlä»£ç 
            var pswpElement = document.querySelectorAll('.pswp')[0]
            //å®šä¹‰å›¾ç‰‡æ•°ç»„å˜é‡
            var imgitems
            /**
             * ç”¨äºæ˜¾ç¤ºé¢„è§ˆç•Œé¢
             * @param index å›¾ç‰‡æ•°ç»„ä¸‹æ ‡
             */
            function viewImg(index) {
              var pswpoptions = {
                index: parseInt(index, 10), // å¼€å§‹å¹»ç¯ç‰‡ç´¢å¼•ã€‚0æ˜¯ç¬¬ä¸€å¼ å¹»ç¯ç‰‡ã€‚å¿…é¡»æ˜¯æ•´æ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚
                bgOpacity: 0.7, // èƒŒæ™¯é€æ˜åº¦ï¼Œ0-1
                maxSpreadZoom: 3, // ç¼©æ”¾çº§åˆ«ï¼Œä¸è¦å¤ªå¤§
              }
              //åˆå§‹åŒ–å¹¶æ‰“å¼€PhotoSwipeï¼ŒpswpElementå¯¹åº”ä¸Šé¢é¢„è§ˆæ¡†æ¶ï¼ŒPhotoSwipeUI_Defaultä¸ºçš®è‚¤ï¼Œimgitemsä¸ºå›¾ç‰‡æ•°ç»„ï¼Œpswpoptionsä¸ºé€‰é¡¹
              var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions)
              gallery.init()
            }
            /**
             * ç”¨äºæ·»åŠ å›¾ç‰‡ç‚¹å‡»äº‹ä»¶
             * @param img å›¾ç‰‡å…ƒç´ 
             * @param index æ‰€å±ä¸‹æ ‡ï¼ˆåœ¨imgitemsä¸­çš„ä½ç½®ï¼‰
             */
            function addImgClick(img, index) {
              img.onclick = function () {
                viewImg(index)
              }
            }
            /**
             * è½®è¯¢æ‰€æœ‰å›¾ç‰‡ï¼Œè·å–srcã€widthã€heightç­‰æ•°æ®ï¼ŒåŠ å…¥imgitemsï¼Œå¹¶ç»™å›¾ç‰‡å…ƒç´ æ·»åŠ äº‹ä»¶
             * æœ€å¥½åœ¨onloadä¸­æ‰§è¡Œè¯¥æ–¹æ³•ï¼Œæœ¬ç«™å› æ”¾åœ¨æœ€åº•éƒ¨ï¼Œæ‰€ä»¥ç›´æ¥åˆå§‹åŒ–
             * å¼‚æ­¥åŠ è½½å›¾ç‰‡å¯åœ¨å›¾ç‰‡å…ƒç´ åˆ›å»ºå®Œæˆåè°ƒç”¨æ­¤æ–¹æ³•
             */
            function initImg() {
              //é‡ç½®å›¾ç‰‡æ•°ç»„
              imgitems = []
              //æŸ¥æ‰¾class:markdown ä¸‹çš„æ‰€æœ‰imgå…ƒç´ å¹¶éå†
              var imgs = document.querySelectorAll('.markdown img')
              for (var i = 0; i < imgs.length; i++) {
                var img = imgs[i]
                //æœ¬ç«™ç›¸å†Œåˆå§‹ä¸ºloadingå›¾ç‰‡ï¼ŒçœŸå®å›¾ç‰‡æ”¾åœ¨data-src
                var ds = img.getAttribute('data-src')
                //åˆ›å»ºimageå¯¹è±¡ï¼Œç”¨äºè·å–å›¾ç‰‡å®½é«˜
                var imgtemp = new Image()
                //åˆ¤æ–­æ˜¯å¦å­˜åœ¨data-src
                if (ds != null && ds.length > 0) {
                  imgtemp.src = ds
                } else {
                  imgtemp.src = img.src
                }
                //åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¼“å­˜
                if (imgtemp.complete) {
                  var imgobj = {
                    src: imgtemp.src,
                    w: imgtemp.width,
                    h: imgtemp.height,
                  }
                  imgitems[i] = imgobj
                  addImgClick(img, i)
                } else {
                  imgtemp.index = i
                  imgtemp.img = img
                  imgtemp.onload = function () {
                    var imgobj = {
                      src: this.src,
                      w: this.width,
                      h: this.height,
                    }
                    //ä¸è¦ä½¿ç”¨pushï¼Œå› ä¸ºonloadå‰åé¡ºåºä¼šä¸åŒ
                    imgitems[this.index] = imgobj
                    //æ·»åŠ ç‚¹å‡»äº‹ä»¶
                    addImgClick(this.img, this.index)
                  }
                }
              }
            }
            //åˆå§‹åŒ–
            initImg();
          </script>
          
                
                          
                            <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.27/dist/twikoo.all.min.js"></script>
                            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
                              integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
                              crossorigin="anonymous" />
                            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
                              integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4"
                              crossorigin="anonymous"></script>
                            <script defer
                              src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
                              integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"
                              crossorigin="anonymous"></script>
                            <script>
                              twikoo.init({
                                envId: 'https://twikoo.qxxiao.cn/',
                                el: '#tcomment',
                                katex: {
                                  delimiters: [
                                    { left: '$$', right: '$$', display: true },
                                    { left: '$', right: '$', display: false },
                                    { left: '\\(', right: '\\)', display: false },
                                    { left: '\\[', right: '\\]', display: true },
                                  ],
                                  throwOnError: false,
                                },
                                // region: 'ap-guangzhou', // ç¯å¢ƒåœ°åŸŸï¼Œé»˜è®¤ä¸º ap-shanghaiï¼Œå¦‚æœæ‚¨çš„ç¯å¢ƒåœ°åŸŸä¸æ˜¯ä¸Šæµ·ï¼Œéœ€ä¼ æ­¤å‚æ•°
                                // path: 'window.location.pathname', // ç”¨äºåŒºåˆ†ä¸åŒæ–‡ç« çš„è‡ªå®šä¹‰ js è·¯å¾„ï¼Œå¦‚æœæ‚¨çš„æ–‡ç« è·¯å¾„ä¸æ˜¯ location.pathnameï¼Œéœ€ä¼ æ­¤å‚æ•°
                              });
                            </script>
                            

                              <!-- line number for code block -->
                              <script>
                                var pres = document.getElementsByTagName('pre')
                                for (var i = 0; i < pres.length; i++) {
                                  var pre = pres[i]
                                  if (pre.childNodes[0].nodeName == 'CODE') {
                                    pre.setAttribute('class', 'line-numbers')
                                  }
                                }
                              </script>
                              

  </body>

</html>