<!DOCTYPE html>
<html lang="en">

  <head>
    <!--ÊØè‰∏™È°µÈù¢ÈÉΩÈúÄË¶Å head linkÁ≠â  -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>
  C++ÁΩëÁªúÂ∫ì - Unique&#39;s Blog
</title>
<link rel="shortcut icon" href="https://blog.qxxiao.eu.org/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/tailwind.css">
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/ldbutton.css">

<link rel="stylesheet" href="https://blog.qxxiao.eu.org/styles/main.css">
<script src="https://blog.qxxiao.eu.org/media/scripts/initTheme.js"></script>
<link rel="stylesheet" href="https://blog.qxxiao.eu.org/media/css/light-dark.css">

<link rel="alternate" type="application/atom+xml" title="C++ÁΩëÁªúÂ∫ì - Unique&#39;s Blog - Atom Feed"
  href="https://blog.qxxiao.eu.org/atom.xml">


      <meta name="description" content="


libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì
cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì

ÂÆâË£Ö


ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì
sockpp
Â∞èÁªì





ËΩ¨ËΩΩÂíåÊù•Ê∫ê‰∫éÔºöÁΩóÂâëÈîãÁöÑ C++ ÂÆûÊàòÁ¨îËÆ∞

libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì..." />
      <meta property="og:title" content="C++ÁΩëÁªúÂ∫ì - Unique&#39;s Blog" />
      <meta property="og:description" content="


libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì
cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì

ÂÆâË£Ö


ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì
sockpp
Â∞èÁªì





ËΩ¨ËΩΩÂíåÊù•Ê∫ê‰∫éÔºöÁΩóÂâëÈîãÁöÑ C++ ÂÆûÊàòÁ¨îËÆ∞

libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì..." />
      <meta property="og:type" content="articles" />
      <meta property="og:url" content="https://blog.qxxiao.eu.org/post/C++ÁΩëÁªúÂ∫ì/" />
      <meta property="og:image"
        content="https://pic.qxxiao.cn/cpp-logo.png" />
      <meta property="og:image:height" content="630" />
      <meta property="og:image:width" content="1200" />
      <meta name="twitter:title" content="C++ÁΩëÁªúÂ∫ì - Unique&#39;s Blog" />
      <meta name="twitter:description" content="


libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì
cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì

ÂÆâË£Ö


ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì
sockpp
Â∞èÁªì





ËΩ¨ËΩΩÂíåÊù•Ê∫ê‰∫éÔºöÁΩóÂâëÈîãÁöÑ C++ ÂÆûÊàòÁ¨îËÆ∞

libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì..." />
      <meta name="twitter:card" content="summary_large_image" />
      <link rel="canonical" href="https://blog.qxxiao.eu.org/post/C++ÁΩëÁªúÂ∫ì/" />

      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css" />
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css" />

      
        <link rel="stylesheet"
          href="https://blog.qxxiao.eu.org/media/css/prism-vs-dark.css" />
        <link href="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.css"
          rel="stylesheet" />
        <link href="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/toolbar/prism-toolbar.min.css"
          rel="stylesheet" />
        
          
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" />
            
  </head>

  <body>
    <div class="antialiased flex flex-col min-h-screen" id="app">
      <!-- Ê†áÈ¢òËèúÂçï -->
<div class="nav py-3 md:py-8 fixed w-full z-10 bg-gray-50 dark:bg-gray-700 transition-all duration-300"
  :class="{ 'scroll': scrolled }">
  <div class="flex justify-end px-4">
    <div class="w-8 h-8 flex justify-center items-center rounded-full md:hidden" @click="showMenu = !showMenu">
      <i class="ri-close-line" v-show="showMenu"></i>
      <i class="ri-menu-3-line" v-show="!showMenu"></i>
    </div>
  </div>
  <nav cloak class="max-w-4xl w-full mx-auto text-right flex flex-col md:flex-row justify-between items-center md:flex"
    :class="`${ showMenu ? 'flex' : 'hidden' }`">
    
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
          <a href="/" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            È¶ñÈ°µ
          </a>
          
            
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
          <a href="/archives" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            ÂΩíÊ°£
          </a>
          
            
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
          <a href="/tags" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            Ê†áÁ≠æ
          </a>
          
            
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
          <a href="https://gh.qxxiao.cn/nav" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            ÂØºËà™
          </a>
          
            
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
        <div
          class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold dark:hover:bg-gray-600 hover:bg-gray-200 nav-time1">
          Êó∂ÂÖâ
            <div class="transition font-semibold nav-time2">
              
                <a href="https://blog.qxxiao.eu.org/diary/" class="">
                  ËØ¥ËØ¥
                </a>
                
                <a href="https://blog.qxxiao.eu.org/gallery/" class="">
                  Áõ∏ÂÜå
                </a>
                
                <a href="https://blog.qxxiao.eu.org/post/book/" class="">
                  ‰π¶Âçï
                </a>
                
            </div>
        </div>
        
            
      <!-- Â¶ÇÊûú menu ÊòØ "Êó∂ÂÖâ"Ôºå Ê∏≤Êüì‰∏∫‰∏Ä‰∏™hoverÊòæÁ§∫‰∏ãÊãâÊ°ÜÁªÑ‰ª∂-->
      
          <a href="/post/about" target=""
            class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
            ÂÖ≥‰∫é
          </a>
          
            
              <!-- <a href="https://blog.qxxiao.eu.org/atom.xml" target="_blank" class="py-2 md:py-1 px-4 mx-4 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
      RSS
    </a> -->
              <!-- ÈªëËâ≤Ê®°ÂºèÔºåÂíå‰∫ÆËâ≤Ê®°ÂºèÂºÄÂÖ≥-->
<div class="py-2 md:py-1 inline-flex transition font-semibold rounded dark:hover:bg-gray-600 hover:bg-gray-200">
  <label for="night-light-checkbox" class="night-light-label">
    <input type="checkbox" id="night-light-checkbox" @change="toggleDarkMode" />
    <span v-cloak class="night-light-ball" id="night-light-ball"></span>
    <svg viewBox="0 0 512 512" class="sun-svg">
      <path id="sun-svg"
        d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z">
      </path>
    </svg>
    <svg viewBox="0 0 512 512" class="moon-svg">
      <path id="moon-svg"
        d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z">
      </path>
    </svg>
  </label>
</div>
                <form id="gridea-search-form" class="inline-flex mx-4 px-4" action="https://blog.qxxiao.eu.org/search/">
                  <input type="search" autocomplete='off' spellcheck='false' name="q" />
                </form>
  </nav>

</div>
        <a href="https://blog.qxxiao.eu.org"
          class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10">
          Unique&#39;s Blog
        </a>
        <div class="max-w-4xl w-full mx-auto">
          <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 px-4 md:px-8 pb-8 mb-8">
            <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
              C++ÁΩëÁªúÂ∫ì
            </h1>
            <!-- ‰∏çÊòæÁ§∫ Post ‰∏≠ÁöÑÂ∞ÅÈù¢ÂõæÁâá -->
            
                <div class="mb-8 flex flex-wrap">
                  <div class="text-gray-400 text-sm mr-4">
                    <i class="ri-calendar-2-line" style="vertical-align: middle;"></i>
                    2022-10-23 ¬∑
                      <i class="ri-file-word-line" style="vertical-align: middle;"></i>
                      3072Â≠ó ¬∑
                        <i class="ri-timer-line" style="vertical-align: middle;"></i>
                        14 min read
                  </div>
                  üè∑Ô∏è&nbsp;
                      
                        <a href="https://blog.qxxiao.eu.org/tag/c/"
                          class="text-indigo-500 text-sm border-b-2 border-solid border-indigo-500 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
                          <i class="ri-hashtag" style="vertical-align: middle;"></i>
                          C++
                        </a>
                        
                </div>
                <div class="markdown mb-8" v-pre><p><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#libcurl%E9%AB%98%E5%8F%AF%E7%A7%BB%E6%A4%8D-%E5%8A%9F%E8%83%BD%E4%B8%B0%E5%AF%8C%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93">libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì</a></li>
<li><a href="#font-colord44c47cpr%E6%9B%B4%E7%8E%B0%E4%BB%A3-%E6%9B%B4%E6%98%93%E7%94%A8%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93font"><font color='#d44c47'>cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì</font></a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85">ÂÆâË£Ö</a></li>
</ul>
</li>
<li><a href="#zmq%E9%AB%98%E6%95%88-%E5%A4%9A%E5%8A%9F%E8%83%BD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93">ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì</a></li>
<li><a href="#sockpp">sockpp</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93">Â∞èÁªì</a></li>
</ul>
</li>
</ul>
</p>
<blockquote>
<p>ËΩ¨ËΩΩÂíåÊù•Ê∫ê‰∫éÔºö<a href="https://time.geekbang.org/column/intro/100051801?utm_source=gold_browser_extension"><strong>ÁΩóÂâëÈîãÁöÑ C++ ÂÆûÊàòÁ¨îËÆ∞</strong></a></p>
</blockquote>
<h2 id="libcurlÈ´òÂèØÁßªÊ§ç-ÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì">libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì</h2>
<p><a href="https://curl.se/libcurl/c/">libcurl</a>ÔºåÊù•Ê∫ê‰∫éËëóÂêçÁöÑcurl È°πÁõÆÔºå‰πüÊòØ curl ÁöÑÂ∫ïÂ±ÇÊ†∏ÂøÉ„ÄÇ</p>
<p>ÂÆÉÊúÄÊó©Âè™ÊîØÊåÅ HTTP ÂçèËÆÆÔºå‰ΩÜÁé∞Âú®Â∑≤ÁªèÊâ©Â±ïÂà∞ÊîØÊåÅÊâÄÊúâÁöÑÂ∫îÁî®Â±ÇÂçèËÆÆÔºåÊØîÂ¶Ç HTTPS„ÄÅFTP„ÄÅLDAP„ÄÅSMTP Á≠âÔºåÂäüËÉΩÂº∫Â§ß„ÄÇ</p>
<p>libcurl ‰ΩøÁî®Á∫Ø C ËØ≠Ë®ÄÂºÄÂèëÔºåÂÖºÂÆπÊÄß„ÄÅÂèØÁßªÊ§çÊÄßÈùûÂ∏∏Â•ΩÔºåÂü∫‰∫é C Êé•Âè£ÂèØ‰ª•ÂæàÂÆπÊòìÂÜôÂá∫ÂêÑÁßçËØ≠Ë®ÄÁöÑÂ∞ÅË£ÖÔºåÊâÄ‰ª• Python„ÄÅPHP Á≠âËØ≠Ë®ÄÈÉΩÊúâ libcurl Áõ∏ÂÖ≥ÁöÑÂ∫ì„ÄÇ</p>
<p>ubuntu ‰∏ãÂÆâË£ÖÔºö</p>
<pre><code class="language-bash">apt-get install libcurl4-openssl-dev
</code></pre>
<p><code>libcurl</code> ÁöÑÊé•Âè£ÂèØ‰ª•Á≤óÁï•Âú∞ÂàÜÊàê‰∏§Â§ßÁ±ªÔºöeasy Á≥ªÂàóÂíå multi Á≥ªÂàó„ÄÇÂÖ∂‰∏≠Ôºåeasy Á≥ªÂàóÊòØÂêåÊ≠•Ë∞ÉÁî®ÔºåÊØîËæÉÁÆÄÂçïÔºõmulti Á≥ªÂàóÊòØÂºÇÊ≠•ÁöÑÂ§öÁ∫øÁ®ãË∞ÉÁî®„ÄÇ</p>
<p>‰ΩøÁî® <code>libcurl</code> Êî∂Âèë HTTP Êï∞ÊçÆÁöÑÂü∫Êú¨Ê≠•È™§Êúâ 4 ‰∏™Ôºö</p>
<ol>
<li>
<p>‰ΩøÁî® <code>curl_easy_init()</code> ÂàõÂª∫‰∏Ä‰∏™Âè•ÊüÑÔºåÁ±ªÂûãÊòØ <code>CURL*</code>„ÄÇ‰ΩÜÊàë‰ª¨ÂÆåÂÖ®Ê≤°ÊúâÂøÖË¶ÅÂÖ≥ÂøÉÂè•ÊüÑÁöÑÁ±ªÂûãÔºåÁõ¥Êé•Áî® auto Êé®ÂØºÂ∞±Ë°å„ÄÇ</p>
</li>
<li>
<p>‰ΩøÁî® <code>curl_easy_setopt()</code> ËÆæÁΩÆËØ∑Ê±ÇÁöÑÂêÑÁßçÂèÇÊï∞ÔºåÊØîÂ¶ÇËØ∑Ê±ÇÊñπÊ≥ï„ÄÅURL„ÄÅheader/body Êï∞ÊçÆ„ÄÅË∂ÖÊó∂„ÄÅÂõûË∞ÉÂáΩÊï∞Á≠â„ÄÇËøôÊòØÊúÄÂÖ≥ÈîÆÁöÑÊìç‰Ωú„ÄÇ</p>
</li>
<li>
<p>‰ΩøÁî® <code>curl_easy_perform()</code> ÂèëÈÄÅÊï∞ÊçÆÔºåËøîÂõûÁöÑÊï∞ÊçÆ‰ºöÁî±ÂõûË∞ÉÂáΩÊï∞Â§ÑÁêÜ„ÄÇ</p>
</li>
<li>
<p>‰ΩøÁî® <code>curl_easy_cleanup()</code> Ê∏ÖÁêÜÂè•ÊüÑÁõ∏ÂÖ≥ÁöÑËµÑÊ∫êÔºåÁªìÊùü‰ºöËØù„ÄÇ</p>
</li>
</ol>
<details class="markdown">
<summary><b><font color='#da720f'>CodeÁ§∫‰æã</font></b></summary>
<pre><code class="language-c++">#include &lt;assert.h&gt;
#include &lt;curl/curl.h&gt;
#include &lt;iostream&gt;

using namespace std;

// ÂõûË∞ÉÂáΩÊï∞ÁöÑÂéüÂûã
// ÂõûË∞É‰ºöË¢´Â§öÊ¨°Ë∞ÉÁî®ÔºåÊØèÊ¨°Ë∞ÉÁî®ÈÉΩ‰ºö‰º†ÈÄí‰∏ÄÂùóÊï∞ÊçÆ;ptrÊåáÂêë‰º†ÈÄíÁöÑÊï∞ÊçÆÔºåËØ•Êï∞ÊçÆÁöÑÂ§ßÂ∞è‰∏∫nmembÔºõsizeÂßãÁªà‰∏∫1
// size * nmemb ÊòØÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞è
// ptr ÊòØÁºìÂÜ≤Âå∫ÁöÑÂú∞ÂùÄ
// userdata ÊòØÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÊï∞ÊçÆ
size_t write_callback(char*, size_t, size_t, void*);

int main() {
    auto curl = curl_easy_init(); // ÂàõÂª∫CURLÂè•ÊüÑ
    assert(curl);

    curl_easy_setopt(curl, CURLOPT_URL, &quot;http://nginx.org&quot;); // ËÆæÁΩÆËØ∑Ê±ÇURI
    // ÈÅøÂÖç‰ª£ÁêÜËÆæÁΩÆ‰∏∫ÈïøËøûÊé• Proxy-Connection:closeÊàñËÄÖ‰∏ç‰ΩøÁî®‰ª£ÁêÜ
    curl_easy_setopt(curl, CURLOPT_PROXY, &quot;&quot;);
    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

    // Ê≤°ÊúâËÆæÁΩÆÂõûË∞ÉÂáΩÊï∞Êó∂ÔºåÂÜÖÈÉ®ÁöÑÈªòËÆ§ÂõûË∞ÉÔºåÊääÂæóÂà∞ÁöÑ HTTP ÂìçÂ∫îÊï∞ÊçÆËæìÂá∫Âà∞Ê†áÂáÜÊµÅ
    // c++11, Êó†ÊçïËé∑ÁöÑ lambda Ë°®ËææÂºèÂèØ‰ª•ÊòæÂºèËΩ¨Êç¢Êàê‰∏Ä‰∏™ÂáΩÊï∞ÊåáÈíà=&gt;C‰ΩøÁî®
    curl_easy_setopt(
        curl, CURLOPT_WRITEFUNCTION, // ËÆæÁΩÆÂõûË∞ÉÂáΩÊï∞
        (decltype(&amp;write_callback))  // decltypeËé∑ÂèñÂáΩÊï∞ÊåáÈíàÁ±ªÂûãÔºåÊòæÂºèËΩ¨Êç¢
            [](char* ptr, size_t size, size_t nmemb, void* userdata) {
                cout &lt;&lt; &quot;size = &quot; &lt;&lt; size &lt;&lt; &quot;*&quot; &lt;&lt; nmemb &lt;&lt; &quot;=&quot; &lt;&lt; size * nmemb &lt;&lt; endl; // ÁÆÄÂçïÁöÑÂ§ÑÁêÜ
                return size * nmemb;                                                      // ËøîÂõûÊé•Êî∂ÁöÑÂ≠óËäÇÊï∞
            });

    auto res = curl_easy_perform(curl); // ÂèëÈÄÅÊï∞ÊçÆ
    if (res != CURLE_OK) {              // Ê£ÄÊü•ÊòØÂê¶ÊâßË°åÊàêÂäü
        cout &lt;&lt; curl_easy_strerror(res) &lt;&lt; endl;
    }
    curl_easy_cleanup(curl); // Ê∏ÖÁêÜÂè•ÊüÑÁõ∏ÂÖ≥ÁöÑËµÑÊ∫ê
    return 0;
}
</code></pre>
</details>
<p><font color='#d44c47'>Êé®Ëçê‰ΩøÁî®cpr‰ª£ÊõøÂÆÉ</font></p>
<h2 id="font-colord44c47cprÊõ¥Áé∞‰ª£-Êõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ìfont"><font color='#d44c47'>cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì</font></h2>
<p><a href="https://docs.libcpr.org">cpr</a> ÊòØÂØπ <code>libcurl</code> ÁöÑ‰∏Ä‰∏™ C++11 Â∞ÅË£ÖÔºå‰ΩøÁî®‰∫ÜÂæàÂ§öÁé∞‰ª£ C++ ÁöÑÈ´òÁ∫ßÁâπÊÄßÔºåÂØπÂ§ñÁöÑÊé•Âè£Ê®°‰ªø‰∫Ü Python ÁöÑ <code>requests</code> Â∫ìÔºåÈùûÂ∏∏ÁÆÄÂçïÊòìÁî®„ÄÇ</p>
<h3 id="ÂÆâË£Ö">ÂÆâË£Ö</h3>
<p>‰∏ãËΩΩÊ∫êÁ†ÅÔºåÁî® cmake ÁºñËØëÂÆâË£Ö</p>
<pre><code class="language-bash">git clone git@github.com:whoshuu/cpr.git
cmake . -DUSE_SYSTEM_CURL=ON -DBUILD_CPR_TESTS=OFF
make &amp;&amp; make install
</code></pre>
<p>ÊàñËÄÖÂú® <code>cmake</code> È°πÁõÆ‰∏≠Áõ¥Êé•‰ΩøÁî®[CMakeLists.txt]Ôºö</p>
<pre><code class="language-makefile">include(FetchContent)
FetchContent_Declare(cpr GIT_REPOSITORY https://github.com/libcpr/cpr.git
                         GIT_TAG 871ed52d350214a034f6ef8a3b8f51c5ce1bd400) # The commit hash for 1.9.0. Replace with the latest from: https://github.com/libcpr/cpr/releases
FetchContent_MakeAvailable(cpr)

target_link_libraries(cpr_example PRIVATE cpr::cpr)
</code></pre>
<p><font color='#458361'><strong>ËØ¥Êòé</strong></font>Ôºö<font color='#458361'>macos ‰∏ãÊåáÂÆö clang++/clang ÁºñËØëÂô®ÁîüÊàêÈ°πÁõÆÔºõgcc ÁºñËØë‰ºöÂ§±Ë¥•</font>Ôºõ</p>
<p>Âú® <code>cpr</code> ÈáåÔºåHTTP ÂçèËÆÆÁöÑÊ¶ÇÂøµÈÉΩË¢´ÂÆûÁé∞‰∏∫Áõ∏Â∫îÁöÑÂáΩÊï∞ÊàñËÄÖÁ±ªÔºåÂÜÖÈÉ®ÂÜçËΩ¨Âåñ‰∏∫ libcurl Êìç‰ΩúÔºå‰∏ªË¶ÅÁöÑÊúâÔºö</p>
<ul>
<li>
<p>GET/HEAD/POST Á≠âËØ∑Ê±ÇÊñπÊ≥ïÔºå‰ΩøÁî®ÂêåÂêçÁöÑ Get/Head/Post ÂáΩÊï∞Ôºõ</p>
</li>
<li>
<p>URL ‰ΩøÁî® Url Á±ªÔºåÂÆÉÊòØ string ÁöÑÂ∞ÅË£ÖÔºõ</p>
</li>
<li>
<p>URL ÂèÇÊï∞‰ΩøÁî® Parameters Á±ªÔºåKV ÁªìÊûÑÔºåËøë‰ºº mapÔºõ</p>
</li>
<li>
<p>ËØ∑Ê±ÇÂ§¥Â≠óÊÆµ‰ΩøÁî® Header Á±ªÔºåÂÆÉÂÖ∂ÂÆûÊòØ map ÁöÑÂà´ÂêçÔºå‰ΩøÁî®ÂÆöÂà∂ÁöÑÂáΩÊï∞ÂÆûÁé∞‰∫ÜÂ§ßÂ∞èÂÜôÊó†ÂÖ≥ÊØîËæÉÔºõ</p>
</li>
<li>
<p>Cookie ‰ΩøÁî® Cookies Á±ªÔºå‰πüÊòØ KV ÁªìÊûÑÔºåËøë‰ºº mapÔºõ</p>
</li>
<li>
<p>ËØ∑Ê±Ç‰Ωì‰ΩøÁî® Body Á±ªÔºõË∂ÖÊó∂ËÆæÁΩÆ‰ΩøÁî® Timeout Á±ª„ÄÇ</p>
</li>
</ul>
<p><code>cpr</code> ‰πüÊîØÊåÅÂºÇÊ≠•Â§ÑÁêÜÔºå‰ΩÜÂÆÉÂÜÖÈÉ®Ê≤°Êúâ‰ΩøÁî® libcurl ÁöÑ <code>multi</code> Êé•Âè£ÔºåËÄåÊòØ‰ΩøÁî®‰∫ÜÊ†áÂáÜÂ∫ìÈáåÁöÑ future Âíå async„ÄÇ</p>
<details class="markdown">
<summary><b><font color='#da720f'>CodeÁ§∫‰æã</font></b></summary>
<pre><code class="language-c++">#include &lt;cpr/cpr.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;

int main(int argc, char** argv) {
    cpr::Response r = cpr::Get(cpr::Url{&quot;https://api.github.com/repos/whoshuu/cpr/contributors&quot;},
                               cpr::Authentication{&quot;user&quot;, &quot;pass&quot;, cpr::AuthMode::BASIC},
                               cpr::Parameters{{&quot;anon&quot;, &quot;true&quot;}, {&quot;key&quot;, &quot;value&quot;}});
    std::cout &lt;&lt; &quot;Status code: &quot; &lt;&lt; r.status_code &lt;&lt; '\n';
    std::cout &lt;&lt; &quot;Header:\n&quot;;
    for (const std::pair&lt;const std::basic_string&lt;char&gt;, std::basic_string&lt;char&gt;&gt;&amp; kv : r.header) {
        std::cout &lt;&lt; '\t' &lt;&lt; kv.first &lt;&lt; ':' &lt;&lt; kv.second &lt;&lt; '\n';
    }
    std::cout &lt;&lt; &quot;Text: &quot; &lt;&lt; r.text &lt;&lt; '\n';
    return 0;
}
</code></pre>
</details>
<h2 id="zmqÈ´òÊïà-Â§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì">ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì</h2>
<p><code>libcurl</code> Âíå <code>cpr</code> Â§ÑÁêÜÁöÑÈÉΩÊòØ HTTP ÂçèËÆÆÔºåÊñπ‰æø‰ΩÜÂçèËÆÆËá™Ë∫´‰πüÊúâ‰∏Ä‰∫õÈôêÂà∂ÔºåÊØîÂ¶ÇÂøÖÈ°ªË¶Å‰∏ÄÊù•‰∏ÄÂõûÔºåÂøÖÈ°ªÁÇπÂØπÁÇπÁõ¥ËøûÔºåÂú®Ë∂ÖÂ§ßÊï∞ÊçÆÈáèÈÄö‰ø°ÁöÑÊó∂ÂÄôÂ∞±‰∏çÊòØÂ§™ÂêàÈÄÇ„ÄÇ<u>Âπ∂‰∏î </u><u><code>libcurl</code></u><u> Âíå </u><u><code>cpr</code></u><u> Âè™ËÉΩÂÖÖÂΩì HTTP ÁöÑÂÆ¢Êà∑Á´Ø</u>„ÄÇ</p>
<p>ZMQ ‰∏ç‰ªÖÊòØ‰∏Ä‰∏™ÂçïÁ∫ØÁöÑÁΩëÁªúÈÄö‰ø°Â∫ìÔºåÊõ¥ÂÉèÊòØ‰∏Ä‰∏™È´òÁ∫ßÁöÑÂºÇÊ≠•Âπ∂ÂèëÊ°ÜÊû∂„ÄÇ</p>
<p><a href="https://zeromq.org/get-started/">https://zeromq.org/get-started/</a></p>
<p>Zero Message Queue‚Äî‚ÄîÈõ∂Âª∂ËøüÁöÑÊ∂àÊÅØÈòüÂàóÔºåÊÑèÂë≥ÁùÄÂÆÉÈô§‰∫ÜÂèØ‰ª•Êî∂ÂèëÊï∞ÊçÆÂ§ñÔºåËøòÂèØ‰ª•Áî®‰ΩúÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÔºåËß£ËÄ¶Â§ö‰∏™Â∫îÁî®ÊúçÂä°‰πãÈó¥ÁöÑÂº∫‰æùËµñÂÖ≥Á≥ªÔºåÊê≠Âª∫È´òÊïà„ÄÅÊúâÂºπÊÄßÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºå‰ªéËÄåË∂ÖË∂äÂéüÁîüÁöÑ Socket„ÄÇ</p>
<p>ubuntu ‰∏ãÂÆâË£Ö</p>
<pre><code class="language-bash">apt-get install libzmq3-dev
</code></pre>
<p>ZMQ ÊòØÁî® C++ ÂºÄÂèëÁöÑÔºå‰ΩÜÂá∫‰∫éÂÖºÂÆπÁöÑËÄÉËôëÔºåÂØπÂ§ñÊèê‰æõÁöÑÊòØÁ∫Ø C Êé•Âè£„ÄÇÂÆÉ‰πüÊúâÂæàÂ§ö<font color='#c04d8a'> C++ Â∞ÅË£ÖÔºåÂèØ‰ª•‰ΩøÁî®</font> <a href="https://github.com/zeromq/cppzmq">cppzmq</a>ÔºåÂè™ÊúâÂ§¥Êñá‰ª∂ÁöÑÂ∞ÅË£ÖÔºåÁÆÄÂçï‰ΩøÁî®„ÄÇ</p>
<p>ZMQ ÊääËá™Ë∫´ÂÆö‰Ωç‰∫éÊõ¥È´òÂ±ÇÊ¨°ÁöÑ‚ÄúÂºÇÊ≠•Ê∂àÊÅØÈòüÂàó‚ÄùÔºåÂÆö‰πâ‰∫Ü 5 Áßç‰∏çÂêåÁöÑÂ∑•‰ΩúÊ®°ÂºèÔºåÊù•ÈÄÇÂ∫îÂÆûÈôÖ‰∏≠Â∏∏ËßÅÁöÑÁΩëÁªúÈÄö‰ø°Âú∫ÊôØ„ÄÇ</p>
<ul>
<li>
<p>ÂéüÁîüÊ®°ÂºèÔºàRAWÔºâÔºåÊ≤°ÊúâÊ∂àÊÅØÈòüÂàóÂäüËÉΩÔºåÁõ∏ÂΩì‰∫éÂ∫ïÂ±Ç Socket ÁöÑÁÆÄÂçïÂ∞ÅË£ÖÔºõ</p>
</li>
<li>
<p>ÁªìÂØπÊ®°ÂºèÔºàPAIRÔºâÔºå‰∏§‰∏™Á´ØÁÇπ‰∏ÄÂØπ‰∏ÄÈÄö‰ø°Ôºõ</p>
</li>
<li>
<p>ËØ∑Ê±ÇÂìçÂ∫îÊ®°ÂºèÔºàREQ-REPÔºâÔºå‰πüÊòØ‰∏§‰∏™Á´ØÁÇπ‰∏ÄÂØπ‰∏ÄÈÄö‰ø°Ôºå‰ΩÜËØ∑Ê±ÇÂøÖÈ°ªÊúâÂìçÂ∫îÔºõ</p>
</li>
<li>
<p>ÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÔºàPUB-SUBÔºâÔºå‰∏ÄÂØπÂ§öÈÄö‰ø°Ôºå‰∏Ä‰∏™Á´ØÁÇπÂèëÂ∏ÉÊ∂àÊÅØÔºåÂ§ö‰∏™Á´ØÁÇπÊé•Êî∂Â§ÑÁêÜÔºõ</p>
</li>
<li>
<p>ÁÆ°ÈÅìÊ®°ÂºèÔºà<strong>PUSH-PULL</strong>ÔºâÔºåÊàñËÄÖÂè´ÊµÅÊ∞¥Á∫øÔºåÂèØ‰ª•‰∏ÄÂØπÂ§öÔºå‰πüÂèØ‰ª•Â§öÂØπ‰∏ÄÔºõ</p>
</li>
</ul>
<p>ÂâçÂõõÁßçÊ®°ÂºèÁ±ª‰ºº HTTP ÂçèËÆÆ„ÄÅClient-Server Êû∂ÊûÑÔºå<strong>ÁÆ°ÈÅìÊ®°Âºè</strong>ÈùûÂ∏∏ÈÄÇÂêà<font color='#d44c47'>ËøõÁ®ãÈó¥Êó†ÈòªÂ°û‰º†ÈÄÅÊµ∑ÈáèÊï∞ÊçÆ</font>„ÄÇÁÆ°ÈÅìÊ®°Âºè‰ªãÁªçÁ§∫ÊÑèÔºö</p>
<figure data-type="image" tabindex="1"><img src="https://static001.geekbang.org/resource/image/8b/2d/8b868214b032aebfcee1e0e97a8a1e2d.png?wh=360*480" alt="" loading="lazy"></figure>
<p>Âú® ZMQ ÈáåÊúâ‰∏§‰∏™Âü∫Êú¨ÁöÑÁ±ª„ÄÇ</p>
<ul>
<li>
<p>Á¨¨‰∏Ä‰∏™ÊòØ <code>context_t</code>ÔºåÂÆÉÊòØ ZMQ ÁöÑËøêË°åÁéØÂ¢É„ÄÇ‰ΩøÁî® ZMQ ÁöÑ‰ªª‰ΩïÂäüËÉΩÂâçÔºåÂøÖÈ°ªË¶ÅÂÖàÂàõÂª∫ÂÆÉ„ÄÇ</p>
</li>
<li>
<p>Á¨¨‰∫å‰∏™ÊòØ <code>socket_t</code>ÔºåË°®Á§∫ ZMQ ÁöÑÂ•óÊé•Â≠óÔºåÈúÄË¶Å<u>ÊåáÂÆöÂàöÊâçËØ¥ÁöÑÈÇ£ 5 ÁßçÂ∑•‰ΩúÊ®°Âºè</u>„ÄÇÊ≥®ÊÑèÂÆÉ‰∏éÂéüÁîü Socket Ê≤°Êúâ‰ªª‰ΩïÂÖ≥Á≥ªÔºåÂè™ÊòØÂÄüÁî®‰∫ÜÂêçÂ≠óÊù•Êñπ‰æøÁêÜËß£„ÄÇ</p>
</li>
</ul>
<p>ZMQ Â•óÊé•Â≠óÊîØÊåÅ TCP/IPÔºåËøòÊîØÊåÅËøõÁ®ãÂÜÖÂíåËøõÁ®ãÈó¥ÈÄö‰ø°ÔºåËøôÂú®Êú¨Êú∫‰∫§Êç¢Êï∞ÊçÆÊó∂‰ºöÊõ¥È´òÊïàÔºö</p>
<ul>
<li>
<p><font color='#c04d8a'>TCP ÈÄö‰ø°</font>Âú∞ÂùÄÁöÑÂΩ¢ÂºèÊòØ <code>tcp://‚Ä¶</code>ÔºåÊåáÂÆö IP Âú∞ÂùÄÂíåÁ´ØÂè£Âè∑Ôºõ</p>
</li>
<li>
<p><font color='#c04d8a'>ËøõÁ®ãÂÜÖÈÄö‰ø°</font>Âú∞ÂùÄÁöÑÂΩ¢ÂºèÊòØ <code>inproc://‚Ä¶</code>ÔºåÊåáÂÆö‰∏Ä‰∏™Êú¨Âú∞ÂèØËÆøÈóÆÁöÑË∑ØÂæÑÔºõ</p>
</li>
<li>
<p><font color='#c04d8a'>ËøõÁ®ãÈó¥ÈÄö‰ø°</font>Âú∞ÂùÄÁöÑÂΩ¢ÂºèÊòØ <code>ipc://‚Ä¶</code>Ôºå‰πüÊòØ‰∏Ä‰∏™Êú¨Âú∞ÂèØËÆøÈóÆÁöÑË∑ØÂæÑ„ÄÇ</p>
</li>
</ul>
<p>Áî® bind()/connect() Ëøô‰∏§‰∏™ÂáΩÊï∞Êää ZMQ Â•óÊé•Â≠óËøûÊé•Ëµ∑Êù•‰πãÂêéÔºåÂ∞±ÂèØ‰ª•Áî® send()/recv() Êù•Êî∂ÂèëÊï∞ÊçÆ‰∫ÜÔºö</p>
<details class="markdown">
<summary><b><font color='#da720f'>CodeÁ§∫‰æã</font></b></summary>
<pre><code class="language-c++">#include &quot;zmq.hpp&quot;

#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;string&gt;
#include &lt;thread&gt;

using namespace std;

int main() {
    const auto thread_num = 1;               // Âπ∂ÂèëÁ∫øÁ®ãÊï∞z
    zmq::context_t context(thread_num);      // ZMQÁéØÂ¢ÉÂèòÈáè
    auto make_sock = [&amp;](auto mode) {        // ÂÆö‰πâ‰∏Ä‰∏™lambdaË°®ËææÂºè
        return zmq::socket_t(context, mode); // ÂàõÂª∫ZMQÂ•óÊé•Â≠ó
    };

    const auto addr = &quot;ipc:///tmp/shm/zmq.sock&quot;s; // ÈÄö‰ø°Âú∞ÂùÄ

    auto receiver = [=]() {              //  lambdaË°®ËææÂºèÊé•Êî∂Êï∞ÊçÆ
        auto sock = make_sock(ZMQ_PULL); // ÂàõÂª∫ZMQÂ•óÊé•Â≠óÔºåÊãâÊï∞ÊçÆ

        sock.bind(addr);                  // ÁªëÂÆöÂ•óÊé•Â≠ó
        assert(sock.handle() != nullptr); // Êñ≠Ë®ÄÂ•óÊé•Â≠óÊúâÊïà

        auto buf = make_unique&lt;char[]&gt;(1024);     // ÂàõÂª∫‰∏Ä‰∏™1024Â≠óËäÇÁöÑÁºìÂÜ≤Âå∫
        zmq::mutable_buffer msg(buf.get(), 1024); // ÂàõÂª∫ZMQÊ∂àÊÅØ
        sock.recv(msg, zmq::recv_flags::none);    // Êé•Êî∂Êï∞ÊçÆ
        cout &lt;&lt; (char*)msg.data() &lt;&lt; endl;
    };

    auto sender = [=]() {                // lambdaË°®ËææÂºèÂèëÈÄÅÊï∞ÊçÆ
        auto sock = make_sock(ZMQ_PUSH); // ÂàõÂª∫ZMQÂ•óÊé•Â≠óÔºåÊé®Êï∞ÊçÆ

        sock.connect(addr); // ËøûÊé•Âà∞ÂØπÁ´Ø
        assert(sock.handle() != nullptr);

        string s = &quot;hello zmq&quot;;
        sock.send(zmq::const_buffer{s.data(), s.length()}); // ÂèëÈÄÅÊ∂àÊÅØ
    };

    thread t1(sender);
    thread t2(receiver);

    t1.join();
    t2.join();
}
</code></pre>
</details>
<p>‰ΩøÁî® ZMQ ÂÆåÂÖ®‰∏çÈúÄË¶ÅËÄÉËôëÂ∫ïÂ±ÇÁöÑ TCP/IP ÈÄö‰ø°ÁªÜËäÇÔºåÂÆÉ‰ºö‰øùËØÅÊ∂àÊÅØÂºÇÊ≠•„ÄÅÂÆâÂÖ®„ÄÅÂÆåÊï¥Âú∞Âà∞ËææÊúçÂä°Âô®ÔºåËÆ©‰Ω†ÂÖ≥Ê≥®ÁΩëÁªúÈÄö‰ø°‰πã‰∏äÁöÑ‰∏öÂä°ÈÄªËæë„ÄÇ</p>
<hr>
<p>ÂÖ∂‰ªñËØ¥Êòé</p>
<ul>
<li>
<p>ZMQ ÁéØÂ¢ÉÁöÑÁ∫øÁ®ãÊï∞„ÄÇÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ 1ÔºåÈÄÇÂΩìÂ¢ûÂ§ß‰∏Ä‰∫õÂ∞±ÂèØ‰ª•ÊèêÈ´ò ZMQ ÁöÑÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>
</li>
<li>
<p>Êî∂ÂèëÊ∂àÊÅØÊó∂ÁöÑÊú¨Âú∞ÁºìÂ≠òÊï∞ÈáèÔºåZMQ ÁöÑÊúØËØ≠Âè´ High Water Mark„ÄÇÂ¶ÇÊûúÊî∂ÂèëÁöÑÊï∞ÊçÆËøáÂ§öÔºåÊï∞ÈáèË∂ÖËøá HWMÔºåZMQ Ë¶Å‰πàÈòªÂ°ûÔºåË¶Å‰πà‰∏¢ÂºÉÊ∂àÊÅØ„ÄÇ</p>
</li>
</ul>
<p>HWM ÈúÄË¶ÅË∞ÉÁî®Â•óÊé•Â≠óÁöÑÊàêÂëòÂáΩÊï∞ setsockopt() Êù•ËÆæÁΩÆÔºåÊ≥®ÊÑèÊî∂Âèë‰ΩøÁî®ÁöÑÊòØ‰∏§‰∏™‰∏çÂêåÁöÑÊ†áÂøóÔºö</p>
<pre><code class="language-c++">sock.setsockopt(ZMQ_RCVHWM, 1000); // Êé•Êî∂Ê∂àÊÅØÊúÄÂ§öÁºìÂ≠ò1000Êù°
sock.setsockopt(ZMQ_SNDHWM, 100); // ÂèëÈÄÅÊ∂àÊÅØÊúÄÂ§öÁºìÂ≠ò100Êù°
</code></pre>
<p>Âç≥‰ΩøËÆæÁΩÆ 100 ‰∏á‰ª•‰∏äÁöÑÂÄºÔºåZMQ ‰ºöÊää‰∏ÄÂàáÈÉΩÂ§ÑÁêÜÂæóÂæàÂ•Ω„ÄÇ</p>
<hr>
<h2 id="sockpp">sockpp</h2>
<p>ÁÆÄÂçïÊòìÁî®ÁöÑC++ Socket Â∫ìÔºåËøôÊòØ‰∏Ä‰∏™<font color='#d44c47'>‰ΩéÂ±ÇÁ∫ßÁöÑ socket ÂåÖË£ÖÂ∫ì</font>ÔºåÊèê‰æõ <code>socket</code>, <code>connector</code>, <code>acceptor</code> Á≠âÁõ∏ÂÖ≥Êé•Âè£„ÄÇ</p>
<p><strong>‰∏ãËΩΩÂπ∂ÂÆâË£Ö</strong></p>
<p><a href="https://github.com/fpagliughi/sockpp">https://github.com/fpagliughi/sockpp</a></p>
<pre><code class="language-shell">git clone https://github.com/fpagliughi/sockpp
cd sockpp
mkdir build &amp;&amp; cd build
cmake .. # ÈªòËÆ§‰ΩøÁî® -DSOCKPP_BUILD_SHARED=ON
cmake --build . --target install
</code></pre>
<p><font color='#d44c47'>MacOS ‰∏ãÂ¶ÇÊûú‰ΩøÁî® gcc/g++ÔºåÂàô‰ΩøÁî® gcc/g++ toolchain ÁºñËØëÂÆâË£Ö</font></p>
<p>‰ΩøÁî®ÊñπÂºèÈùûÂ∏∏ÁÆÄÂçïÔºå‰æãÂ¶Ç TCP ÁºñÁ®ãÔºö</p>
<details class="markdown">
<summary><b><font color='#da720f'>TCP Server</font></b></summary>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;thread&gt;
#include &quot;sockpp/tcp_acceptor.h&quot;
#include &quot;sockpp/version.h&quot;

using namespace std;
// The thread function. 
void run_echo(sockpp::tcp_socket sock)
{
	ssize_t n;
	char buf[512];
	
	while ((n = sock.read(buf, sizeof(buf))) &gt; 0)
		sock.write_n(buf, n);
	cout &lt;&lt; &quot;Connection closed from &quot; &lt;&lt; sock.peer_address() &lt;&lt; endl;
}

int main(int argc, char* argv[])
{
	cout &lt;&lt; &quot;Sample TCP echo server for 'sockpp' &quot;
		&lt;&lt; sockpp::SOCKPP_VERSION &lt;&lt; '\n' &lt;&lt; endl;

	in_port_t port = (argc &gt; 1) ? atoi(argv[1]) : 12345;

	sockpp::socket_initializer sockInit;
	sockpp::tcp_acceptor acc(port);

	if (!acc) {
		cerr &lt;&lt; &quot;Error creating the acceptor: &quot; &lt;&lt; acc.last_error_str() &lt;&lt; endl;
		return 1;
	}
	cout &lt;&lt; &quot;Awaiting connections on port &quot; &lt;&lt; port &lt;&lt; &quot;...&quot; &lt;&lt; endl;

	while (true) {
		sockpp::inet_address peer;

		// Accept a new client connection
		sockpp::tcp_socket sock = acc.accept(&amp;peer);
		cout &lt;&lt; &quot;Received a connection request from &quot; &lt;&lt; peer &lt;&lt; endl;

		if (!sock) {
			cerr &lt;&lt; &quot;Error accepting incoming connection: &quot; 
				&lt;&lt; acc.last_error_str() &lt;&lt; endl;
		}
		else {
			// Create a thread and transfer the new stream to it.
			thread thr(run_echo, std::move(sock));
			thr.detach();
		}
	}
	return 0;
}
</code></pre>
</details>
<details class="markdown">
<summary><b><font color='#da720f'>TCP Client</font></b></summary>
<pre><code class="language-c++">#include &lt;iostream&gt;
#include &lt;string&gt;
#include &quot;sockpp/tcp_connector.h&quot;
#include &quot;sockpp/version.h&quot;

using namespace std;
using namespace std::chrono;

int main(int argc, char* argv[])
{
	cout &lt;&lt; &quot;Sample TCP echo client for 'sockpp' &quot;
		&lt;&lt; sockpp::SOCKPP_VERSION &lt;&lt; '\n' &lt;&lt; endl;

	string host = (argc &gt; 1) ? argv[1] : &quot;localhost&quot;;
	in_port_t port = (argc &gt; 2) ? atoi(argv[2]) : 12345;

	sockpp::socket_initializer sockInit;
	sockpp::tcp_connector conn({host, port});
	if (!conn) {
		cerr &lt;&lt; &quot;Error connecting to server at &quot;
			&lt;&lt; sockpp::inet_address(host, port)
			&lt;&lt; &quot;\n\t&quot; &lt;&lt; conn.last_error_str() &lt;&lt; endl;
		return 1;
	}

	cout &lt;&lt; &quot;Created a connection from &quot; &lt;&lt; conn.address() &lt;&lt; endl;

	// Set a timeout for the responses
	if (!conn.read_timeout(seconds(5))) {
	    cerr &lt;&lt; &quot;Error setting timeout on TCP stream: &quot;
	            &lt;&lt; conn.last_error_str() &lt;&lt; endl;
	}

	string s, sret;
	while (getline(cin, s) &amp;&amp; !s.empty()) {
		if (conn.write(s) != ssize_t(s.length())) {
			cerr &lt;&lt; &quot;Error writing to the TCP stream: &quot;
				&lt;&lt; conn.last_error_str() &lt;&lt; endl;
			break;
		}

		sret.resize(s.length());
		ssize_t n = conn.read_n(&amp;sret[0], s.length());

		if (n != ssize_t(s.length())) {
			cerr &lt;&lt; &quot;Error reading from TCP stream: &quot;
				&lt;&lt; conn.last_error_str() &lt;&lt; endl;
			break;
		}
		cout &lt;&lt; sret &lt;&lt; endl;
	}
	return (!conn) ? 1 : 0;
}
</code></pre>
</details>
<h2 id="Â∞èÁªì">Â∞èÁªì</h2>
<ol>
<li>
<p>libcurl ÊòØ‰∏Ä‰∏™ÂäüËÉΩÂÆåÂñÑ„ÄÅÁ®≥ÂÆöÂèØÈù†ÁöÑÂ∫îÁî®Â±ÇÈÄö‰ø°Â∫ìÔºåÊúÄÂ∏∏Áî®ÁöÑÂ∞±ÊòØ HTTP ÂçèËÆÆÔºõ</p>
</li>
<li>
<p>cpr ÊòØÂØπ libcurl ÁöÑ C++ Â∞ÅË£ÖÔºåÊé•Âè£ÁÆÄÂçïÊòìÁî®Ôºõlibcurl Âíå cpr ÈÉΩÂè™ËÉΩ‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÊù•‰ΩøÁî®Ôºå‰∏çËÉΩÁºñÂÜôÊúçÂä°Âô®Á´ØÂ∫îÁî®Ôºõ</p>
</li>
<li>
<p>ZMQ ÊòØ‰∏Ä‰∏™È´òÁ∫ßÁöÑÁΩëÁªúÈÄö‰ø°Â∫ìÔºåÊîØÊåÅÂ§öÁßçÈÄö‰ø°Ê®°ÂºèÔºåÂèØ‰ª•ÊääÊ∂àÊÅØÈòüÂàóÂäüËÉΩÁõ¥Êé•ÂµåÂÖ•Â∫îÁî®Á®ãÂ∫èÔºåÊê≠Âª∫Âá∫È´òÊïà„ÄÅÁÅµÊ¥ª„ÄÅÂÖçÁÆ°ÁêÜÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªü„ÄÇ</p>
</li>
<li>
<p>sockpp ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÊòìÁî®ÁöÑÂ∫ïÂ±ÇsockÂ∞ÅË£ÖÂ∫ì„ÄÇ</p>
</li>
</ol>
<p>ÊúÄÂêéÔºå C++20ÔºåÂéüÊú¨È¢ÑËÆ°‰ºöÂä†ÂÖ•ÊúüÂæÖÂ∑≤‰πÖÁöÑ networking Â∫ìÔºå‰ΩÜÁé∞Âú®Â∑≤ÁªèË¢´Êé®ËøüÂà∞‰∫Ü‰∏ã‰∏Ä‰∏™ÁâàÊú¨ÔºàC++23Ôºâ</p>
<p>networking Â∫ìÂü∫‰∫éÂ∑≤ÊúâÂ§öÂπ¥ÂÆûË∑µÁöÑ <code>boost.asio</code>ÔºåÈááÁî®ÂâçÊëÑÂô®Ê®°ÂºèÔºàProactorÔºâÁªü‰∏ÄÂ∞ÅË£Ö‰∫ÜÊìç‰ΩúÁ≥ªÁªüÁöÑÂêÑÁßçÂºÇÊ≠•Êú∫Âà∂Ôºà<code>epoll</code>„ÄÅ<code>kqueue</code>„ÄÅ<code>IOCP</code>ÔºâÔºåËÄå‰∏îÊîØÊåÅÂçèÁ®ã„ÄÇ</p>
</div>

                <!-- Êñ∞Âä†ÁöÑÊ®°ÂùóÁöÑÔºåÂ∫îËØ•‰ΩøÁî®Ê®°Áâà-->
                <!-- ÁâàÊùÉÂ£∞Êòé -->
                
                  <div class="jumbotron">
                    <div class="container">
                      <p>
                        <i class="ri-article-line"></i>
                        <b>Êú¨ÊñáÈìæÊé•:</b>
                        <a href="https://blog.qxxiao.eu.org/post/C++ÁΩëÁªúÂ∫ì/" target="_blank">
                          C++ÁΩëÁªúÂ∫ì
                        </a>
                      </p>
                      <p>
                        <i class="ri-creative-commons-line"></i>
                        <b>ÁâàÊùÉÂ£∞Êòé:</b>
                        Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî®
                        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC
                          BY-NC-SA
                          4.0</a>
                        ËÆ∏ÂèØÂçèËÆÆÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ
                      </p>
                      <p>
                        <i class="ri-time-line"></i>
                        <b>ÂèëÂ∏ÉÊó•Êúü:</b>
                        2022-10-23
                      </p>
                      <p>
                        <i class="ri-time-line"></i>
                        <b>ÊúÄÊñ∞ÊûÑÂª∫:</b>
                        2024-07-02
                          <!-- ‰ΩøÁî® themeConfig.dateFormat Ê†ºÂºèÂØπÊó•ÊúüÊ†ºÂºèÂåñÔºå‰æãÂ¶ÇYY-MM-DD -->
                          <!-- {
  &#34;content&#34;: &#34;&lt;!-- more --&gt;\n&lt;h2 id=\&#34;2024-06-10\&#34;&gt;2024-06-10&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Ê∑ªÂä†‰∫ÜÁõ∏ÂÜåÁöÑÊó∂Èó¥Á∫øÊ†∑Âºè&lt;/li&gt;\n&lt;li&gt;Ê∑ªÂä†‰∫Ü‰π¶ÂçïÈ°µÈù¢&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2024-06-09\&#34;&gt;2024-06-09&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;‰øÆÊîπ‰∫ÜÈÉ®ÂàÜÊ†∑ÂºèÔºåÂéªÈô§‰∫ÜÂ§ö‰∏™È°µÈù¢‰∏≠ÁöÑ css class: animated fadeInÔºåÈÅøÂÖçÈ°µÈù¢Âà∑Êñ∞Êó∂ÊäñÂä®&lt;/li&gt;\n&lt;li&gt;‰øÆÊîπ‰∫ÜÊñáÁ´† TOC ÁõÆÂΩïÁöÑÂÆΩÂ∫¶Ê†∑Âºè, Âè™ÈôêÂà∂ÊúÄÂ∞è/ÊúÄÂ§ßÂÆΩÂ∫¶Ôºå‰ΩøÂÖ∂ËÉΩÂ§üËá™ÈÄÇÂ∫îÂÜÖÂÆπÂÆΩÂ∫¶&lt;/li&gt;\n&lt;li&gt;Áªü‰∏Ä post ÊñáÁ´†Âíå diary/gallary È°µÈù¢ÁöÑÂõûÂà∞È°∂ÈÉ®/Â∫ïÈÉ®ÊåâÈíÆÊ†∑ÂºèÂíå‰ΩçÁΩÆ&lt;/li&gt;\n&lt;li&gt;ÁÆÄÂåñ‰∫Ü Êòé‰∫Æ/ÈªëÊöóÊ®°ÂºèÂàáÊç¢‰ª£Á†ÅÔºåÂà†Èô§‰∫Ü &lt;code&gt;ldbutton.js&lt;/code&gt;Ôºå‰ΩøÁî® Vue Êù•ÊéßÂà∂Ê†∑ÂºèÂàáÊç¢„ÄÇ‰ΩÜÂà∑Êñ∞‰ºöÂØºËá¥È°µÈù¢Èó™Â±èÔºåÂõ†‰∏∫ Vue ÊâßË°åÂÆå mounted ÂêéÊâç‰ºöÊ≠£Á°ÆËÆ°ÁÆóÂΩìÂâçÊ®°ÂºèÔºõËß£ÂÜ≥Ôºö‰ΩøÁî® js ÂáΩÊï∞Êù•ÊèêÂâçÂÆåÊàêÊ®°ÂºèÁöÑÂàùÂßãÂåñÔºåÈÅøÂÖçÈó™Â±è&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2023-12-20\&#34;&gt;2023-12-20&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Ê∑ªÂä†&lt;code&gt;Êó∂ÂÖâ/ËØ¥ËØ¥&lt;/code&gt;ÂäüËÉΩÔºåÊï∞ÊçÆÊù•Ê∫ê‰∫é Memos\n&lt;ul&gt;\n&lt;li&gt;Áî±‰∫éËØÑËÆ∫ÈÉ®ÁΩ≤Âú® vercelÔºåÂä†ËΩΩÊÖ¢ÔºåËØ¥ËØ¥ËØÑËÆ∫ÈúÄË¶ÅÂú®&lt;a href=\&#34;https://memos.qxxiao.eu.org\&#34;&gt;ÂéüÂßã Memos È°µÈù¢&lt;/a&gt;ÊâìÂºÄËØÑËÆ∫ (Êõ¥Êñ∞ÔºöÊ∑ªÂä†‰∫ÜÈ°µÈù¢ËØÑËÆ∫ÔºåÂèØ‰ª•Áõ¥Êé•Âú®ÂΩìÂâçÈ°µÈù¢ËÆøÈóÆ)&lt;/li&gt;\n&lt;li&gt;ËØ¥ËØ¥ÊúçÂä°Âô®ÈÉ®ÁΩ≤Âú® AzureÔºåÂèØËÉΩÈúÄË¶Å‰ª£ÁêÜÊâçËÉΩÊ≠£Â∏∏ËÆøÈóÆ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Â∞Ü‰ªìÂ∫ìÂêåÊ≠•Âà∞ githubÔºåÂà©Áî® github actions ËøõË°åÂçöÂÆ¢ÂêåÊ≠•\n&lt;ul&gt;\n&lt;li&gt;‰πãÂâç‰ΩøÁî® Mac ÁõëÊéßËÑöÊú¨ÂêåÊ≠•ÂçöÂÆ¢Ôºågridea ÊØèÊ¨°È¢ÑËßàÂèØËÉΩ‰ºöËß¶ÂèëÂØºËá¥Á´ôÁÇπ url ÊòØ localhostÔºåÂπ∂‰∏îÊúâÊó∂‰ªªÂä°Ëß¶Âèë‰∏çÂèäÊó∂&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Ê∑ªÂä† &lt;a href=\&#34;https://github.com/kytrun/gridea-search\&#34;&gt;gridea-search Êèí‰ª∂&lt;/a&gt;ÔºåÂØπÂ∫îÊ∑ªÂä†‰∫ÜÊêúÁ¥¢Ê°ÜÔºåË∞ÉÊï¥‰∫Ü‰∏Ä‰∏ãËèúÂçïÁïåÈù¢&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2023-12-12\&#34;&gt;2023-12-12&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Êõ¥Êñ∞ËØÑËÆ∫Á≥ªÁªü twikoo ÁâàÊú¨Âà∞ 1.6.27&lt;/li&gt;\n&lt;li&gt;Êõ¥Êñ∞Ê†∑ÂºèÔºåÂà†Èô§ÂèãÈìæËèúÂçïÔºåÁõ¥Êé•Âú®&lt;a href=\&#34;/post/about\&#34;&gt;ÂÖ≥‰∫éÈ°µÈù¢&lt;/a&gt;Ê∑ªÂä†Ôºå‰øùÁïô‰∫ÜÈÉ®ÂàÜ css Ê†∑Âºè&lt;/li&gt;\n&lt;li&gt;‰ºòÂåñÔºå‰ΩøÁî® &lt;code&gt;v-cloak&lt;/code&gt; ÈÅøÂÖçÂá∫Áé∞ post È°µÈù¢ÁöÑÊñáÁ´†ÁõÆÂΩïÈó™ÁÉÅÈóÆÈ¢ò&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-07-06\&#34;&gt;2022-07-06&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;‰øÆÊîπÊ†∑ÂºèÔºåÊ∑ªÂä†Êöó‰∫ÆÊ®°ÂºèÂàáÊç¢&lt;/li&gt;\n&lt;li&gt;‰øÆÊîπÈªòËÆ§Ê†∑ÂºèÊü•ËØ¢ÊñπÂºèÔºåÁÆÄÂçïÊ†∑ÂºèÈÄÇÈÖç&lt;/li&gt;\n&lt;li&gt;‰øÆÊîπ‰ª£Á†Å‰∏ªÈ¢ò‰∏∫ &lt;code&gt;vs-dark&lt;/code&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-03-20\&#34;&gt;2022-03-20&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Ê∑ªÂä†ÊñáÁ´†ÂàóË°®‰∏≠ÁöÑÊ†áÁ≠æÁöÑÊòæÁ§∫ÔºåËÆæÁΩÆÊ†áÁ≠æÊ†∑Âºè(ÈªòËÆ§Ê≤°Êúâ border-indigo-500 Á≠âÊ†∑Âºè)&lt;/li&gt;\n&lt;li&gt;‰ºòÂåñÂ∏ÉÂ±Ä&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-02-27\&#34;&gt;2022-02-27&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Ê∑ªÂä†‰ª£Á†ÅÊ†∑ÂºèÔºåÂ¢ûÂä†Ë°åÂè∑ÂíåÂ§çÂà∂ÈÄâÈ°π&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-02-25\&#34;&gt;2022-02-25&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;‰øÆÊîπ‰∏ªÈ¢òÈÖçÁΩÆÔºåÊ∑ªÂä†ÂèãÈìæËèúÂçïÔºå‰ºòÂåñ‰∫ÜÈ°µÈù¢ÊïàÊûú&lt;/li&gt;\n&lt;li&gt;Ê∑ªÂä†ÂØºËà™ËèúÂçï&lt;/li&gt;\n&lt;li&gt;È°µÈù¢Ê†∑ÂºèÁßªÂä®Âíå‰øÆÊîπ&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-02-20\&#34;&gt;2022-02-20&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;Êõ¥Êñ∞È°µÈù¢Ê†∑ÂºèÔºåÊ∑ªÂä†ÁâàÊùÉÂíåËØ¥ÊòéÔºàÊîπÂèòÂ≠ó‰ΩìÂèØËÉΩ‰ºöÂØºËá¥‰∏≠ÊñáÁõÆÂΩï‰∏çËÉΩÊ≠£Á°ÆË∑≥ËΩ¨Ôºâ&lt;/li&gt;\n&lt;li&gt;Êõ¥Êñ∞ÂΩíÊ°£È°µÈù¢ÔºåÊ∑ªÂä†Êó•Êúü‰ø°ÊÅØÂíåÊØèÁØáÊñáÁ´†ÁöÑÁõ∏ÂÖ≥ÊèèËø∞&lt;/li&gt;\n&lt;/ul&gt;\n&lt;h2 id=\&#34;2022-02-10\&#34;&gt;2022-02-10&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;ÁÆÄÂçï‰ΩøÁî® Rocky ‰∏ªÈ¢ò&lt;/li&gt;\n&lt;li&gt;‰øÆÊîπ‰∏ªÈ°µ‰ø°ÊÅØÁöÑÊèèËø∞‰ª•Âèä footer ‰ø°ÊÅØ&lt;/li&gt;\n&lt;li&gt;‰ΩøÁî® Twikoo ËØÑËÆ∫&lt;/li&gt;\n&lt;/ul&gt;\n&#34;,
  &#34;fileName&#34;: &#34;log&#34;,
  &#34;abstract&#34;: &#34;&#34;,
  &#34;title&#34;: &#34;Êõ¥Êñ∞Êó•Âøó&#34;,
  &#34;tags&#34;: [],
  &#34;date&#34;: &#34;2020-01-05 00:37:45&#34;,
  &#34;dateFormat&#34;: &#34;2020-01-05&#34;,
  &#34;feature&#34;: &#34;&#34;,
  &#34;link&#34;: &#34;https://blog.qxxiao.eu.org/post/log/&#34;,
  &#34;hideInList&#34;: true,
  &#34;isTop&#34;: false,
  &#34;stats&#34;: {
    &#34;text&#34;: &#34;3 min read&#34;,
    &#34;time&#34;: 139000,
    &#34;words&#34;: 636,
    &#34;minutes&#34;: 3
  },
  &#34;description&#34;: &#34;\n2024-06-10\n\nÊ∑ªÂä†‰∫ÜÁõ∏ÂÜåÁöÑÊó∂Èó¥Á∫øÊ†∑Âºè\nÊ∑ªÂä†‰∫Ü‰π¶ÂçïÈ°µÈù¢\n\n2024-06-09\n\n‰øÆÊîπ‰∫ÜÈÉ®ÂàÜÊ†∑ÂºèÔºåÂéªÈô§‰∫ÜÂ§ö‰∏™È°µÈù¢‰∏≠ÁöÑ css class: animated fadeInÔºåÈÅøÂÖçÈ°µÈù¢Âà∑Êñ∞Êó∂ÊäñÂä®\n‰øÆÊîπ‰∫ÜÊñáÁ´† TOC ÁõÆÂΩïÁöÑÂÆΩÂ∫¶Ê†∑Âºè, ...&#34;,
  &#34;toc&#34;: &#34;&lt;ul class=\&#34;markdownIt-TOC\&#34;&gt;\n&lt;li&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;a href=\&#34;#2024-06-10\&#34;&gt;2024-06-10&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2024-06-09\&#34;&gt;2024-06-09&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2023-12-20\&#34;&gt;2023-12-20&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2023-12-12\&#34;&gt;2023-12-12&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-07-06\&#34;&gt;2022-07-06&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-03-20\&#34;&gt;2022-03-20&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-02-27\&#34;&gt;2022-02-27&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-02-25\&#34;&gt;2022-02-25&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-02-20\&#34;&gt;2022-02-20&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;&lt;a href=\&#34;#2022-02-10\&#34;&gt;2022-02-10&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&#34;
}
                            
                                  2022-10-23
                                     -->
                      </p>
                    </div>
                  </div>
                  
                    <!-- Êñ∞Âä†ÁöÑÊ®°ÂùóÁöÑÔºåÂ∫îËØ•‰ΩøÁî®Ê®°Áâà-->
                    <!--ÈòÖËØªÊ¨°Êï∞-->
                    <div class="text-center text-gray-400">
                      <i class="ri-eye-line"></i>
                      Êú¨ÊñáÂ∑≤Ë¢´ÈòÖËØª
                      <span id="twikoo_visitors">0</span>
                      Ê¨°ÔºåËØ•Êï∞ÊçÆ‰ªÖ‰æõÂèÇËÄÉ
                    </div>

                    <!-- Share to Twitter, Weibo, Telegram -->
                    <div class="flex items-center">
                      <div class="mr-4 flex items-center">
                        <i class="ri-share-forward-line text-gray-500"></i>
                      </div>
                      <div
                        class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToTwitter">
                        <i class="ri-twitter-line"></i>
                      </div>
                      <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToWeibo">
                        <i class="ri-weibo-line"></i>
                      </div>
                      <div
                        class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex"
                        @click="shareToTelegram">
                        <i class="ri-telegram-line"></i>
                      </div>
                    </div>
          </div>

          <!-- Êñ∞Âä†ÁöÑÊ®°ÂùóÁöÑÔºåÂ∫îËØ•‰ΩøÁî®Ê®°Áâà-->
          <!-- ËØÑËÆ∫ËØ¥Êòé-->
          <div class="jumbotron-comment">
            <div class="container">
              <p>
                <i class="ri-message-3-line"></i>
                Ê¨¢Ëøé‰ªª‰Ωï‰∏éÊñáÁ´†ÂÜÖÂÆπÁõ∏ÂÖ≥Âπ∂‰øùÊåÅÂ∞äÈáçÁöÑËØÑËÆ∫üòä !
              </p>
            </div>
          </div>

          
                        
                            
                              <div id="tcomment"></div>
                               <footer class="py-12 text-center px-4 md:px-0" v-pre>
  ÂÖ± 43 ÁØáÊñáÁ´† | Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <i class="ri-rss-line"></i><a href="https://blog.qxxiao.eu.org/atom.xml" target="_blank" target="_blank">RSS</a></br>
¬©2020-2024 <a href="https://blog.qxxiao.eu.org/index.html" target="_blank">Nuo</a>. All rights reserved.
</footer>

<!--Ê≤°ÊúâÊ∑ªÂä†/Áî®Âà∞app ‰∏≠ÁöÑ‰∏ªÈ¢òfooterÈÖçÁΩÆÊ∂àÊÅØÔºåÂ¶ÇÊûú‰ΩøÁî®ÔºåÂ∞Ü‰∏äÈù¢ÁöÑ href ÊõøÊç¢‰∏∫ÂéüÂú∞ÂùÄ-->
<!---->

        </div>

        <!-- TOC Container -->
        <div
          class="fixed right-0 bottom-0 mb-40 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all"
          @click="showToc = true">
          <i class="ri-file-list-line"></i>
        </div>

        <div v-cloak
          class="fixed right-0 top-0 bottom-0 overflow-y-auto w-16-24 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast"
          :class="{ '-mr-64': !showToc }">
          <div class="flex mb-4 justify-end">
            <div
              class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast"
              @click="showToc = false">
              <i class="ri-close-line text-lg"></i>
            </div>
          </div>
          <div class="post-toc-container"><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#libcurl%E9%AB%98%E5%8F%AF%E7%A7%BB%E6%A4%8D-%E5%8A%9F%E8%83%BD%E4%B8%B0%E5%AF%8C%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93">libcurlÔºöÈ´òÂèØÁßªÊ§ç„ÄÅÂäüËÉΩ‰∏∞ÂØåÁöÑÈÄö‰ø°Â∫ì</a></li>
<li><a href="#font-colord44c47cpr%E6%9B%B4%E7%8E%B0%E4%BB%A3-%E6%9B%B4%E6%98%93%E7%94%A8%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93font"><font color='#d44c47'>cprÔºöÊõ¥Áé∞‰ª£„ÄÅÊõ¥ÊòìÁî®ÁöÑÈÄö‰ø°Â∫ì</font></a>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85">ÂÆâË£Ö</a></li>
</ul>
</li>
<li><a href="#zmq%E9%AB%98%E6%95%88-%E5%A4%9A%E5%8A%9F%E8%83%BD%E7%9A%84%E9%80%9A%E4%BF%A1%E5%BA%93">ZMQÔºöÈ´òÊïà„ÄÅÂ§öÂäüËÉΩÁöÑÈÄö‰ø°Â∫ì</a></li>
<li><a href="#sockpp">sockpp</a></li>
<li><a href="#%E5%B0%8F%E7%BB%93">Â∞èÁªì</a></li>
</ul>
</li>
</ul>
</div>
        </div>

        <!-- Back to top -->
        <div v-cloak
          class="fixed right-0 bottom-0 mb-20 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg dark:bg-gray-500 dark:text-gray-200"
          @click="backToUp" v-show="scrolled">
          <i class="ri-arrow-up-line"></i>
        </div>
        <!-- Back to bottom -->
        <div v-cloak
          class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-10 h-10 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg dark:bg-gray-500 dark:text-gray-200"
          @click="backToBottom" v-show="!atBottom">
          <i class="ri-arrow-down-line"></i>
        </div>
    </div>

    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

      <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
      <script src="https://blog.qxxiao.eu.org/media/scripts/main.js"></script>

      <!-- Code Highlight -->
      
        <script src="https://blog.qxxiao.eu.org/media/prism.js"></script>
        <script>
          Prism.highlightAll();
        </script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/toolbar/prism-toolbar.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/show-language/prism-show-language.min.js"></script>
        <script defer
          src="https://cdn.bootcdn.net/ajax/libs/prism/1.19.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
        

          <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
          <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
          <script>
            //ÊãøÂà∞È¢ÑËßàÊ°ÜÊû∂Ôºå‰πüÂ∞±ÊòØ‰∏äÈù¢ÁöÑhtml‰ª£Á†Å
            var pswpElement = document.querySelectorAll('.pswp')[0]
            //ÂÆö‰πâÂõæÁâáÊï∞ÁªÑÂèòÈáè
            var imgitems
            /**
             * Áî®‰∫éÊòæÁ§∫È¢ÑËßàÁïåÈù¢
             * @param index ÂõæÁâáÊï∞ÁªÑ‰∏ãÊ†á
             */
            function viewImg(index) {
              var pswpoptions = {
                index: parseInt(index, 10), // ÂºÄÂßãÂπªÁÅØÁâáÁ¥¢Âºï„ÄÇ0ÊòØÁ¨¨‰∏ÄÂº†ÂπªÁÅØÁâá„ÄÇÂøÖÈ°ªÊòØÊï¥Êï∞ÔºåËÄå‰∏çÊòØÂ≠óÁ¨¶‰∏≤„ÄÇ
                bgOpacity: 0.7, // ËÉåÊôØÈÄèÊòéÂ∫¶Ôºå0-1
                maxSpreadZoom: 3, // Áº©ÊîæÁ∫ßÂà´Ôºå‰∏çË¶ÅÂ§™Â§ß
              }
              //ÂàùÂßãÂåñÂπ∂ÊâìÂºÄPhotoSwipeÔºåpswpElementÂØπÂ∫î‰∏äÈù¢È¢ÑËßàÊ°ÜÊû∂ÔºåPhotoSwipeUI_Default‰∏∫ÁöÆËÇ§Ôºåimgitems‰∏∫ÂõæÁâáÊï∞ÁªÑÔºåpswpoptions‰∏∫ÈÄâÈ°π
              var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions)
              gallery.init()
            }
            /**
             * Áî®‰∫éÊ∑ªÂä†ÂõæÁâáÁÇπÂáª‰∫ã‰ª∂
             * @param img ÂõæÁâáÂÖÉÁ¥†
             * @param index ÊâÄÂ±û‰∏ãÊ†áÔºàÂú®imgitems‰∏≠ÁöÑ‰ΩçÁΩÆÔºâ
             */
            function addImgClick(img, index) {
              img.onclick = function () {
                viewImg(index)
              }
            }
            /**
             * ËΩÆËØ¢ÊâÄÊúâÂõæÁâáÔºåËé∑Âèñsrc„ÄÅwidth„ÄÅheightÁ≠âÊï∞ÊçÆÔºåÂä†ÂÖ•imgitemsÔºåÂπ∂ÁªôÂõæÁâáÂÖÉÁ¥†Ê∑ªÂä†‰∫ã‰ª∂
             * ÊúÄÂ•ΩÂú®onload‰∏≠ÊâßË°åËØ•ÊñπÊ≥ïÔºåÊú¨Á´ôÂõ†ÊîæÂú®ÊúÄÂ∫ïÈÉ®ÔºåÊâÄ‰ª•Áõ¥Êé•ÂàùÂßãÂåñ
             * ÂºÇÊ≠•Âä†ËΩΩÂõæÁâáÂèØÂú®ÂõæÁâáÂÖÉÁ¥†ÂàõÂª∫ÂÆåÊàêÂêéË∞ÉÁî®Ê≠§ÊñπÊ≥ï
             */
            function initImg() {
              //ÈáçÁΩÆÂõæÁâáÊï∞ÁªÑ
              imgitems = []
              //Êü•Êâæclass:markdown ‰∏ãÁöÑÊâÄÊúâimgÂÖÉÁ¥†Âπ∂ÈÅçÂéÜ
              var imgs = document.querySelectorAll('.markdown img')
              for (var i = 0; i < imgs.length; i++) {
                var img = imgs[i]
                //Êú¨Á´ôÁõ∏ÂÜåÂàùÂßã‰∏∫loadingÂõæÁâáÔºåÁúüÂÆûÂõæÁâáÊîæÂú®data-src
                var ds = img.getAttribute('data-src')
                //ÂàõÂª∫imageÂØπË±°ÔºåÁî®‰∫éËé∑ÂèñÂõæÁâáÂÆΩÈ´ò
                var imgtemp = new Image()
                //Âà§Êñ≠ÊòØÂê¶Â≠òÂú®data-src
                if (ds != null && ds.length > 0) {
                  imgtemp.src = ds
                } else {
                  imgtemp.src = img.src
                }
                //Âà§Êñ≠ÊòØÂê¶Â≠òÂú®ÁºìÂ≠ò
                if (imgtemp.complete) {
                  var imgobj = {
                    src: imgtemp.src,
                    w: imgtemp.width,
                    h: imgtemp.height,
                  }
                  imgitems[i] = imgobj
                  addImgClick(img, i)
                } else {
                  imgtemp.index = i
                  imgtemp.img = img
                  imgtemp.onload = function () {
                    var imgobj = {
                      src: this.src,
                      w: this.width,
                      h: this.height,
                    }
                    //‰∏çË¶Å‰ΩøÁî®pushÔºåÂõ†‰∏∫onloadÂâçÂêéÈ°∫Â∫è‰ºö‰∏çÂêå
                    imgitems[this.index] = imgobj
                    //Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
                    addImgClick(this.img, this.index)
                  }
                }
              }
            }
            //ÂàùÂßãÂåñ
            initImg();
          </script>
          
                
                          
                            <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.36/dist/twikoo.all.min.js"></script>
                            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
                              integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
                              crossorigin="anonymous" />
                            <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"
                              integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4"
                              crossorigin="anonymous"></script>
                            <script defer
                              src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
                              integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"
                              crossorigin="anonymous"></script>
                            <script>
                              twikoo.init({
                                envId: 'https://twikoo.qxxiao.eu.org/',
                                el: '#tcomment',
                                katex: {
                                  delimiters: [
                                    { left: '$$', right: '$$', display: true },
                                    { left: '$', right: '$', display: false },
                                    { left: '\\(', right: '\\)', display: false },
                                    { left: '\\[', right: '\\]', display: true },
                                  ],
                                  throwOnError: false,
                                },
                                // region: 'ap-guangzhou', // ÁéØÂ¢ÉÂú∞ÂüüÔºåÈªòËÆ§‰∏∫ ap-shanghaiÔºåÂ¶ÇÊûúÊÇ®ÁöÑÁéØÂ¢ÉÂú∞Âüü‰∏çÊòØ‰∏äÊµ∑ÔºåÈúÄ‰º†Ê≠§ÂèÇÊï∞
                                // path: 'window.location.pathname', // Áî®‰∫éÂå∫ÂàÜ‰∏çÂêåÊñáÁ´†ÁöÑËá™ÂÆö‰πâ js Ë∑ØÂæÑÔºåÂ¶ÇÊûúÊÇ®ÁöÑÊñáÁ´†Ë∑ØÂæÑ‰∏çÊòØ location.pathnameÔºåÈúÄ‰º†Ê≠§ÂèÇÊï∞
                              });
                            </script>
                            

                              <!-- line number for code block -->
                              <script>
                                var pres = document.getElementsByTagName('pre')
                                for (var i = 0; i < pres.length; i++) {
                                  var pre = pres[i]
                                  if (pre.childNodes[0].nodeName == 'CODE') {
                                    pre.setAttribute('class', 'line-numbers')
                                  }
                                }
                              </script>
                              

  </body>

</html>